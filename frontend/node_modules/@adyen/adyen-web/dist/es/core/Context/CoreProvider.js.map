{"version":3,"file":"CoreProvider.js","sources":["../../../../src/core/Context/CoreProvider.tsx"],"sourcesContent":["import { h, toChildArray, createContext, Fragment } from 'preact';\nimport { useContext, useEffect } from 'preact/hooks';\nimport { Resources } from './Resources';\nimport Language from '../../language';\n\nimport type { ComponentChildren } from 'preact';\nimport type { IAnalytics } from '../Analytics/Analytics';\n\ninterface CoreProviderProps {\n    loadingContext: string;\n    i18n: Language;\n    resources: Resources;\n    children: ComponentChildren;\n    analytics?: IAnalytics;\n}\n\ntype ContextValue = {\n    i18n: Language;\n    loadingContext: string;\n    resources: Resources;\n    analytics: IAnalytics;\n};\n\nconst CoreContext = createContext<ContextValue | undefined>(undefined);\n\nconst CoreProvider = ({ i18n, loadingContext, resources, analytics, children }: CoreProviderProps) => {\n    const coreContext = useContext(CoreContext);\n\n    useEffect(() => {\n        if (!i18n || !loadingContext || !resources) {\n            console.warn(\n                `CoreProvider - WARNING core provider is missing:${i18n ? '' : 'i18n'} ${loadingContext ? '' : 'loadingContext'} ${resources ? '' : 'resources'}`\n            );\n        }\n    }, [i18n, loadingContext, resources]);\n\n    if (coreContext) {\n        return <Fragment>{toChildArray(children)}</Fragment>;\n    }\n\n    return (\n        <CoreContext.Provider\n            value={{\n                i18n,\n                loadingContext,\n                resources,\n                analytics\n            }}\n        >\n            {toChildArray(children)}\n        </CoreContext.Provider>\n    );\n};\n\nconst useCoreContext = (): ContextValue => {\n    const context = useContext(CoreContext);\n\n    if (context === undefined) {\n        throw new Error('\"useCoreContext\" must be used within a CoreProvider');\n    }\n\n    return context;\n};\n\nexport { CoreProvider, useCoreContext };\n"],"names":["CoreContext","createContext","undefined","CoreProvider","i18n","loadingContext","resources","analytics","children","coreContext","useContext","useEffect","console","warn","h","Fragment","toChildArray","Provider","value","useCoreContext","context","Error"],"mappings":"8MAuBA,MAAMA,EAAcC,OAAwCC,GAEtDC,EAAe,EAAGC,OAAMC,iBAAgBC,YAAWC,YAAWC,eAChE,MAAMC,EAAcC,EAAWV,GAU/B,OARAW,EAAU,KACDP,GAASC,GAAmBC,GAC7BM,QAAQC,KACJ,mDAAmDT,EAAO,GAAK,UAAUC,EAAiB,GAAK,oBAAoBC,EAAY,GAAK,gBAG7I,CAACF,EAAMC,EAAgBC,IAEtBG,EACOK,EAACC,OAAUC,EAAaR,IAI/BM,EAACd,EAAYiB,SAAQ,CACjBC,MAAO,CACHd,OACAC,iBACAC,YACAC,cAGHS,EAAaR,KAKpBW,EAAiB,KACnB,MAAMC,EAAUV,EAAWV,GAE3B,QAAgBE,IAAZkB,EACA,MAAM,IAAIC,MAAM,uDAGpB,OAAOD"}