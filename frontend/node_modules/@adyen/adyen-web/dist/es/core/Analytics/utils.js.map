{"version":3,"file":"utils.js","sources":["../../../../src/core/Analytics/utils.ts"],"sourcesContent":["import { errorCodeMapping } from './constants';\nimport { digitsOnlyFormatter } from '../../utils/Formatters/formatters';\nimport { ERROR_FIELD_REQUIRED, ERROR_INVALID_FORMAT_EXPECTS } from '../Errors/constants';\nimport type { AnalyticsOptions } from './types';\n\nexport const mapErrorCodesForAnalytics = (errorCode: string, target: string) => {\n    // Some of the more generic error codes required combination with target to retrieve a specific code\n    if (errorCode === ERROR_FIELD_REQUIRED || errorCode === ERROR_INVALID_FORMAT_EXPECTS) {\n        return errorCodeMapping[`${errorCode}.${target}`] ?? errorCode;\n    }\n\n    let errCode = errorCodeMapping[errorCode] ?? errorCode;\n\n    // If errCode isn't now a number - then we just need to remove any non-digits\n    // since the correct error code is already contained within the string e.g. securedField related errors\n    if (isNaN(Number(errCode))) {\n        errCode = digitsOnlyFormatter(errCode);\n    }\n\n    return errCode;\n};\n\nexport const processAnalyticsData = (analyticsData?: AnalyticsOptions['analyticsData']): AnalyticsOptions['analyticsData'] => {\n    const ALLOWED_ANALYTICS_DATA: Array<keyof AnalyticsOptions['analyticsData']> = ['applicationInfo', 'checkoutAttemptId'];\n\n    if (!analyticsData) return {};\n\n    return ALLOWED_ANALYTICS_DATA.reduce<AnalyticsOptions['analyticsData']>((acc, prop) => {\n        if (prop === 'applicationInfo') {\n            if (analyticsData.applicationInfo !== undefined) acc.applicationInfo = analyticsData.applicationInfo;\n            return acc;\n        }\n\n        if (prop === 'checkoutAttemptId') {\n            if (analyticsData.checkoutAttemptId !== undefined) acc.checkoutAttemptId = analyticsData.checkoutAttemptId;\n        }\n\n        return acc;\n    }, {});\n};\n"],"names":["mapErrorCodesForAnalytics","errorCode","target","ERROR_FIELD_REQUIRED","ERROR_INVALID_FORMAT_EXPECTS","errorCodeMapping","errCode","isNaN","Number","digitsOnlyFormatter","processAnalyticsData","analyticsData","reduce","acc","prop","undefined","applicationInfo","checkoutAttemptId"],"mappings":"6NAKO,MAAMA,EAA4B,CAACC,EAAmBC,KAEzD,GAAID,IAAcE,GAAwBF,IAAcG,EACpD,OAAOC,EAAiB,GAAGJ,KAAaC,MAAaD,EAGzD,IAAIK,EAAUD,EAAiBJ,IAAcA,EAQ7C,OAJIM,MAAMC,OAAOF,MACbA,EAAUG,EAAoBH,IAG3BA,GAGEI,EAAwBC,GAG5BA,EAF0E,CAAC,kBAAmB,qBAIrEC,OAA0C,CAACC,EAAKC,IAC7D,oBAATA,QACsCC,IAAlCJ,EAAcK,kBAA+BH,EAAIG,gBAAkBL,EAAcK,iBAC9EH,IAGE,sBAATC,QACwCC,IAApCJ,EAAcM,oBAAiCJ,EAAII,kBAAoBN,EAAcM,mBAGtFJ,GACR,CAAA,GAbwB,CAAA"}