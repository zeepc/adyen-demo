{"version":3,"file":"Button.js","sources":["../../../../../src/components/internal/Button/Button.tsx"],"sourcesContent":["import { Component, h, TargetedMouseEvent } from 'preact';\nimport classNames from 'classnames';\nimport Spinner from '../Spinner';\nimport { useCoreContext } from '../../../core/Context/CoreProvider';\nimport { ButtonProps, ButtonState } from './types';\nimport './Button.scss';\n\nclass Button extends Component<ButtonProps, ButtonState> {\n    public static readonly defaultProps = {\n        status: 'default',\n        variant: 'primary',\n        disabled: false,\n        label: '',\n        inline: false,\n        target: '_self'\n    };\n\n    public onClick = (e: TargetedMouseEvent<HTMLButtonElement>) => {\n        e.preventDefault();\n\n        if (!this.props.disabled) {\n            this.props.onClick?.(e, { complete: this.complete });\n        }\n    };\n\n    public complete = (delay = 1_000) => {\n        this.setState({ completed: true });\n        setTimeout(() => {\n            this.setState({ completed: false });\n        }, delay);\n    };\n\n    private readonly buttonStatusSRLabel = (status: string): string => {\n        const srLabels: Record<string, string> = {\n            loading: 'loading',\n            redirect: 'payButton.redirecting'\n        };\n\n        return srLabels[status] || '';\n    };\n\n    render() {\n        const {\n            classNameModifiers = [],\n            disabled,\n            href,\n            icon,\n            onClickCompletedIcon,\n            inline,\n            label,\n            ariaLabel,\n            ariaDescribedBy,\n            status,\n            variant,\n            buttonRef,\n            onClickCompletedLabel,\n            onMouseEnter,\n            onMouseLeave,\n            onFocus,\n            onBlur,\n            onKeyDown,\n            onKeyPress\n        }: ButtonProps = this.props;\n        const { completed } = this.state;\n        const { i18n } = useCoreContext();\n\n        const buttonIcon =\n            onClickCompletedIcon || icon ? (\n                <img\n                    className=\"adyen-checkout__button__icon\"\n                    src={this.state.completed ? (onClickCompletedIcon ?? icon) : icon}\n                    alt=\"\"\n                    aria-hidden=\"true\"\n                />\n            ) : (\n                ''\n            );\n\n        const modifiers = [\n            ...classNameModifiers,\n            ...(variant === 'primary' ? [] : [variant]),\n            ...(inline ? ['inline'] : []),\n            ...(completed ? ['completed'] : []),\n            ...(status === 'loading' || status === 'redirect' ? ['loading'] : [])\n        ];\n\n        const buttonClasses = classNames(['adyen-checkout__button', ...modifiers.map(m => `adyen-checkout__button--${m}`)]);\n\n        const buttonStates = {\n            loading: (\n                <span aria-hidden=\"true\" className=\"adyen-checkout__button__content\">\n                    <Spinner size=\"medium\" inline />\n                </span>\n            ),\n            redirect: (\n                <span aria-hidden=\"true\" className=\"adyen-checkout__button__content\">\n                    <Spinner size=\"medium\" inline />\n                    {i18n.get('payButton.redirecting')}\n                </span>\n            ),\n            default: (\n                <span className=\"adyen-checkout__button__content\">\n                    {buttonIcon}\n                    <span className=\"adyen-checkout__button__text\">{this.state.completed ? (onClickCompletedLabel ?? label) : label}</span>\n                </span>\n            )\n        };\n\n        const buttonText = buttonStates[status] || buttonStates.default;\n\n        if (href) {\n            return (\n                <a\n                    className={buttonClasses}\n                    href={href}\n                    target={this.props.target}\n                    rel={this.props.rel}\n                    aria-disabled={disabled}\n                    onClick={(e: TargetedMouseEvent<HTMLAnchorElement>) => {\n                        if (disabled) {\n                            e.preventDefault();\n                        }\n                    }}\n                >\n                    {buttonText}\n                </a>\n            );\n        }\n\n        return (\n            <button\n                ref={buttonRef}\n                className={buttonClasses}\n                type=\"button\"\n                disabled={disabled}\n                onClick={this.onClick}\n                aria-label={ariaLabel}\n                aria-describedby={ariaDescribedBy}\n                onMouseEnter={onMouseEnter}\n                onMouseLeave={onMouseLeave}\n                onKeyDown={onKeyDown}\n                onFocus={onFocus}\n                onBlur={onBlur}\n                onKeyPress={onKeyPress}\n            >\n                {buttonText}\n                {status !== 'loading' && status !== 'redirect' && this.props.children}\n                <span role=\"status\" aria-live=\"polite\" className=\"adyen-checkout__button__text--sr-only\">\n                    {i18n.get(this.buttonStatusSRLabel(status))}\n                </span>\n            </button>\n        );\n    }\n}\n\nexport default Button;\n"],"names":["Button","Component","render","classNameModifiers","disabled","href","icon","onClickCompletedIcon","inline","label","ariaLabel","ariaDescribedBy","status","variant","buttonRef","onClickCompletedLabel","onMouseEnter","onMouseLeave","onFocus","onBlur","onKeyDown","onKeyPress","this","props","completed","state","i18n","useCoreContext","buttonIcon","h","img","className","src","alt","aria-hidden","modifiers","buttonClasses","classNames","map","m","buttonStates","loading","span","Spinner","size","redirect","get","default","buttonText","a","target","rel","aria-disabled","onClick","e","preventDefault","button","ref","type","aria-label","aria-describedby","children","role","aria-live","buttonStatusSRLabel","super","args","_define_property","complete","delay","setState","setTimeout","defaultProps"],"mappings":"qWAOA,MAAMA,UAAeC,EAkCjBC,MAAAA,GACI,MAAMC,mBACFA,EAAqB,GAAEC,SACvBA,EAAQC,KACRA,EAAIC,KACJA,EAAIC,qBACJA,EAAoBC,OACpBA,EAAMC,MACNA,EAAKC,UACLA,EAASC,gBACTA,EAAeC,OACfA,EAAMC,QACNA,EAAOC,UACPA,EAASC,sBACTA,EAAqBC,aACrBA,EAAYC,aACZA,EAAYC,QACZA,EAAOC,OACPA,EAAMC,UACNA,EAASC,WACTA,GACaC,KAAKC,OAChBC,UAAEA,GAAcF,KAAKG,OACrBC,KAAEA,GAASC,IAEXC,EACFrB,GAAwBD,EACpBuB,EAACC,MAAAA,CACGC,UAAU,+BACVC,IAAKV,KAAKG,MAAMD,UAAajB,GAAwBD,EAAQA,EAC7D2B,IAAI,GACJC,cAAY,SAGhB,GAGFC,EAAY,IACXhC,KACa,YAAZU,EAAwB,GAAK,CAACA,MAC9BL,EAAS,CAAC,UAAY,MACtBgB,EAAY,CAAC,aAAe,MACjB,YAAXZ,GAAmC,aAAXA,EAAwB,CAAC,WAAa,IAGhEwB,EAAgBC,EAAW,CAAC,4BAA6BF,EAAUG,IAAIC,GAAK,2BAA2BA,OAEvGC,EAAe,CACjBC,QACIZ,EAACa,OAAAA,CAAKR,cAAY,OAAOH,UAAU,mCAC/BF,EAACc,EAAAA,CAAQC,KAAK,SAASpC,QAAAA,KAG/BqC,SACIhB,EAACa,OAAAA,CAAKR,cAAY,OAAOH,UAAU,mCAC/BF,EAACc,EAAAA,CAAQC,KAAK,SAASpC,QAAAA,IACtBkB,EAAKoB,IAAI,0BAGlBC,QACIlB,EAACa,OAAAA,CAAKX,UAAU,mCACXH,EACDC,EAACa,OAAAA,CAAKX,UAAU,gCAAgCT,KAAKG,MAAMD,UAAaT,GAAyBN,EAASA,KAKhHuC,EAAaR,EAAa5B,IAAW4B,EAAaO,QAExD,OAAI1C,EAEIwB,EAACoB,IAAAA,CACGlB,UAAWK,EACX/B,KAAMA,EACN6C,OAAQ5B,KAAKC,MAAM2B,OACnBC,IAAK7B,KAAKC,MAAM4B,IAChBC,gBAAehD,EACfiD,QAAUC,IACFlD,GACAkD,EAAEC,mBAITP,GAMTnB,EAAC2B,SAAAA,CACGC,IAAK3C,EACLiB,UAAWK,EACXsB,KAAK,SACLtD,SAAUA,EACViD,QAAS/B,KAAK+B,QACdM,aAAYjD,EACZkD,mBAAkBjD,EAClBK,aAAcA,EACdC,aAAcA,EACdG,UAAWA,EACXF,QAASA,EACTC,OAAQA,EACRE,WAAYA,GAEX2B,EACW,YAAXpC,GAAmC,aAAXA,GAAyBU,KAAKC,MAAMsC,SAC7DhC,EAACa,OAAAA,CAAKoB,KAAK,SAASC,YAAU,SAAShC,UAAU,yCAC5CL,EAAKoB,IAAIxB,KAAK0C,oBAAoBpD,KAInD,mBAjJJqD,SAAAC,GAUIC,EAAA7C,KAAO+B,UAAWC,IACdA,EAAEC,iBAEGjC,KAAKC,MAAMnB,UACZkB,KAAKC,MAAM8B,UAAUC,EAAG,CAAEc,SAAU9C,KAAK8C,aAIjDD,EAAA7C,KAAO8C,WAAW,CAACC,EAAQ,OACvB/C,KAAKgD,SAAS,CAAE9C,WAAW,IAC3B+C,WAAW,KACPjD,KAAKgD,SAAS,CAAE9C,WAAW,KAC5B6C,KAGPF,EAAA7C,KAAiB0C,sBAAuBpD,IACK,CACrC6B,QAAS,UACTI,SAAU,yBAGEjC,IAAW,MA9B/BuD,EADEnE,EACqBwE,eAAe,CAClC5D,OAAQ,UACRC,QAAS,UACTT,UAAU,EACVK,MAAO,GACPD,QAAQ,EACR0C,OAAQ"}