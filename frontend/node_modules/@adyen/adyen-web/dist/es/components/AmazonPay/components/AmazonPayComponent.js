import{createElement as n}from"../../../external/preact/dist/preact.js";import{useState as e,useRef as o,useEffect as a}from"../../../external/preact/hooks/dist/hooks.js";import t from"../../internal/Spinner/Spinner.js";import{getAmazonPayUrl as r}from"../utils.js";import i from"./AmazonPayButton.js";import s from"./ChangePaymentDetailsButton.js";import c from"./OrderButton.js";import u from"./SignOutButton.js";import m from"../../../utils/Script.js";import d from"../../../core/Analytics/useAnalytics.js";function p(p){const[l,y]=e("pending"),h=o(null),f=o(null),{analytics:g}=d(),z=()=>{y("ready")};return this.getSubmitFunction=()=>h.current&&h.current.initCheckout?()=>h.current.initCheckout():f.current&&f.current.createOrder?()=>f.current.createOrder():void 0,a(()=>{const n=r(p.configuration.region),e=new m({src:n,component:"amazonpay",analytics:g});return window.amazon?z():e.load().then(z),()=>{e.remove()}},[g]),"pending"===l?n("div",{className:"adyen-checkout__amazonpay"},n("div",{className:"adyen-checkout__amazonpay__status adyen-checkout__amazonpay__status--pending"},n(t,null))):p.showSignOutButton?n("div",{className:"adyen-checkout__amazonpay"},n(u,{amazonRef:window.amazon,onSignOut:p.onSignOut})):p.amazonCheckoutSessionId?n("div",{className:"adyen-checkout__amazonpay"},p.showOrderButton&&n(c,{amazonCheckoutSessionId:p.amazonCheckoutSessionId,chargePermissionType:p.chargePermissionType,recurringMetadata:p.recurringMetadata,clientKey:p.clientKey,onError:p.onError,publicKeyId:p.configuration?.publicKeyId,region:p.configuration?.region,returnUrl:p.returnUrl,ref:f}),p.showChangePaymentDetailsButton&&n(s,{amazonCheckoutSessionId:p.amazonCheckoutSessionId,amazonRef:window.amazon})):n("div",{className:"adyen-checkout__amazonpay"},n(i,{...p,showPayButton:this.props.showPayButton,amazonRef:window.amazon,ref:h}))}export{p as default};
//# sourceMappingURL=AmazonPayComponent.js.map
