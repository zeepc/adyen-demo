{"version":3,"file":"createElements.js","sources":["../../../../../src/components/Dropin/elements/createElements.ts"],"sourcesContent":["import { filterUnsupportedPaymentMethod, filterPresent, filterAvailable, optionallyFilterUpiSubTxVariants } from './filters';\nimport { getComponentConfiguration } from './getComponentConfiguration';\nimport getComponentNameOfPaymentType from '../../components-name-map';\nimport UIElement from '../../internal/UIElement';\n\nimport type { PaymentMethodsConfiguration } from '../types';\nimport type { ICore } from '../../../core/types';\nimport type { PaymentMethod, StoredPaymentMethod } from '../../../core/ProcessResponse/PaymentMethods/PaymentMethods';\n\nfunction isStoredPaymentMethod(paymentMethod: PaymentMethod | StoredPaymentMethod): paymentMethod is StoredPaymentMethod {\n    return 'isStoredPaymentMethod' in paymentMethod && paymentMethod.isStoredPaymentMethod === true;\n}\n\n/**\n * Returns a filtered (available) list of component Elements\n *\n * @param paymentMethods - Array of PaymentMethod objects from the /paymentMethods response\n * @param paymentMethodsConfiguration - Dropin paymentMethodsConfiguration object\n * @param dropinProps - High level props to be passed through to every component\n * @param core - Reference to the checkout core object\n */\nconst createElements = (\n    paymentMethods: PaymentMethod[] | StoredPaymentMethod[],\n    paymentMethodsConfiguration: PaymentMethodsConfiguration,\n    dropinProps,\n    core: ICore\n): Promise<UIElement[]> => {\n    const elements = optionallyFilterUpiSubTxVariants(paymentMethods)\n        .filter(filterUnsupportedPaymentMethod)\n        .map(paymentMethod => {\n            const paymentMethodConfigFromDropin = getComponentConfiguration(\n                paymentMethod.type,\n                paymentMethodsConfiguration,\n                isStoredPaymentMethod(paymentMethod)\n            );\n\n            const PaymentMethodElement = core.getComponent(paymentMethod.type);\n\n            if (!PaymentMethodElement) {\n                console.warn(\n                    `\\nDropin: You support the payment method '${\n                        paymentMethod.type\n                    }' but this component has not been configured. Make sure to import the Class  '${getComponentNameOfPaymentType(\n                        paymentMethod.type\n                    )}' and then pass it in the Dropin's 'paymentMethodComponents' config property if you wish to offer this payment method.`\n                );\n                return null;\n            }\n\n            const requiredPropsWhenUsingDropin = {\n                ...(isStoredPaymentMethod(paymentMethod)\n                    ? { storedPaymentMethodId: paymentMethod.storedPaymentMethodId }\n                    : { paymentMethodId: paymentMethod._id }),\n                ...dropinProps\n            };\n\n            const elementProps = {\n                ...requiredPropsWhenUsingDropin,\n                ...paymentMethodConfigFromDropin\n            };\n\n            return new PaymentMethodElement(core, elementProps);\n        })\n        .filter(filterPresent);\n\n    return filterAvailable(elements);\n};\n\nexport default createElements;\n"],"names":["isStoredPaymentMethod","paymentMethod","createElements","paymentMethods","paymentMethodsConfiguration","dropinProps","core","elements","optionallyFilterUpiSubTxVariants","filter","filterUnsupportedPaymentMethod","map","paymentMethodConfigFromDropin","getComponentConfiguration","type","PaymentMethodElement","getComponent","console","warn","getComponentNameOfPaymentType","elementProps","storedPaymentMethodId","paymentMethodId","_id","filterPresent","filterAvailable"],"mappings":"mQASA,SAASA,EAAsBC,GAC3B,MAAO,0BAA2BA,IAAyD,IAAxCA,EAAcD,qBACrE,CAUA,MAAME,EAAiB,CACnBC,EACAC,EACAC,EACAC,KAEA,MAAMC,EAAWC,EAAiCL,GAC7CM,OAAOC,GACPC,IAAIV,IACD,MAAMW,EAAgCC,EAClCZ,EAAca,KACdV,EACAJ,EAAsBC,IAGpBc,EAAuBT,EAAKU,aAAaf,EAAca,MAE7D,IAAKC,EAQD,OAPAE,QAAQC,KACJ,6CACIjB,EAAca,qFAC+DK,EAC7ElB,EAAca,+HAGf,KAGX,MAOMM,EAAe,IAPgB,IAC7BpB,EAAsBC,GACpB,CAAEoB,sBAAuBpB,EAAcoB,uBACvC,CAAEC,gBAAiBrB,EAAcsB,QACpClB,MAKAO,GAGP,OAAO,IAAIG,EAAqBT,EAAMc,KAEzCX,OAAOe,GAEZ,OAAOC,EAAgBlB"}