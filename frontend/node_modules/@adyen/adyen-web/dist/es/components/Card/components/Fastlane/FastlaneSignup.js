import{createElement as e,Fragment as n}from"../../../../external/preact/dist/preact.js";import{useMemo as t,useState as a,useCallback as o,useEffect as s}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../../../../_virtual/index.js";import i from"../../../internal/Toggle/Toggle.js";import l from"../../../internal/Img/Img.js";import c from"../../../../core/Context/useImage.js";import m from"./USOnlyPhoneInput.js";import{InfoButton as d}from"./InfoButton.js";import{useCoreContext as g}from"../../../../core/Context/CoreProvider.js";import{LabelOnlyDisclaimerMessage as f}from"../../../internal/DisclaimerMessage/DisclaimerMessage.js";import{isConfigurationValid as u}from"./utils/validate-configuration.js";import p from"./utils/mobile-number-formatter.js";import{AnalyticsInfoEvent as y,UiTarget as h,InfoEventType as k}from"../../../../core/Analytics/events/AnalyticsInfoEvent.js";const C=["mc","visa"],j=({showConsent:j,defaultToggleState:v,termsAndConditionsLink:_,privacyPolicyLink:S,termsAndConditionsVersion:b,fastlaneSessionId:I,currentDetectedBrand:T,telephoneNumber:x,onChange:A,onSubmitAnalytics:D,type:N})=>{const w=t(()=>j&&C.includes(T),[j,T]),[L,P]=a(w),[V,E]=a(v),F=c(),[M,B]=a(""),{i18n:O}=g(),G=t(()=>u({showConsent:j,defaultToggleState:v,termsAndConditionsLink:_,privacyPolicyLink:S,termsAndConditionsVersion:b,fastlaneSessionId:I}),[j,v,_,S,b,I]),R=o(()=>{const e=!V;E(e);const n=new y({component:N,type:k.clicked,target:h.fastlaneSignupConsentToggle,configData:{isToggleOn:e}});D(n)},[V,D,N]);return s(()=>{G&&A({fastlaneData:{consentShown:L,fastlaneSessionId:I,consentGiven:!!w&&V,...b&&{consentVersion:b},...M&&{telephoneNumber:M}}})},[w,L,b,V,I,M,A,G]),s(()=>{w&&P(!0)},[w]),s(()=>{if(!G)return;const e=new y({component:N,type:k.rendered,configData:{isFastlaneSignupRendered:w}});D(e)},[w,G,D,N]),w&&G?e("div",{className:"adyen-checkout-card__fastlane","data-testid":"fastlane-signup-component"},e("div",{className:r("adyen-checkout-card__fastlane-consent-toggle",{"adyen-checkout-card__fastlane-consent-toggle--active":V})},e(i,{checked:V,onChange:R,ariaLabel:O.get("card.fastlane.consentToggle"),label:e("span",null,O.get("card.fastlane.consentToggle"))}),e(d,null)),V&&e(n,null,e(m,{initialValue:p(x),onChange:B}),e("div",{className:"adyen-checkout-card__fastlane-consent-text"},e(f,{message:O.get("card.fastlane.consentText"),urls:[_,S]})),e(l,{className:"adyen-checkout-card__fastlane-brand",src:F({imageFolder:"components/"})("paypal_fastlane_black"),alt:O.get("card.fastlane.a11y.logo")}))):null};export{j as default};
//# sourceMappingURL=FastlaneSignup.js.map
