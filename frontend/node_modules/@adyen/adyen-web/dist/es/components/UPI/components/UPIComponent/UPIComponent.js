import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as a,useCallback as o,useEffect as r}from"../../../../external/preact/hooks/dist/hooks.js";import n from"../../../../core/Context/useImage.js";import{UPI_MODE as s,A11Y as i}from"../../constants.js";import"../../../../_virtual/index.js";import{SegmentedControlRegion as d}from"../../../internal/SegmentedControl/SegmentedControlRegion.js";import l from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as p}from"../../../../core/Context/CoreProvider.js";import c from"../../../internal/Alert/Alert.js";import m from"../UPIMandate/UPIMandate.js";import{useAmount as u}from"../../../../core/Context/AmountProvider.js";function I({mode:I,onChange:f,payButton:g,showPayButton:C,mandate:N,apps:h=[]}){const{i18n:j}=p(),y=n(),[A,E]=a("ready"),[b,T]=a(null),{amount:k}=u(),[x,P]=a(I===s.QR_CODE),R=N&&e(m,{mandate:N,amount:k});this.setStatus=e=>{E(e)},this.showValidation=()=>{I===s.INTENT&&Q()};const B=o(e=>{e?.id!==b?.id&&(T(e),P(!0),E("ready"))},[b]),Q=o(()=>{b?(E("ready"),P(!0)):(E("error"),P(!1))},[b]);return r(()=>{I!==s.QR_CODE?f({data:{...b&&{app:b}},isValid:x}):f({data:{},valid:{},errors:{},isValid:!0})},[b,x,I,f]),e(t,null,I===s.INTENT&&e(d,{id:i.AreaId.INTENT,ariaLabelledBy:i.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent"},e("span",{className:"adyen-checkout-upi-instruction-label"},j.get("upi.intent.instruction")),"error"===A&&e(c,{icon:"cross"},j.get("upi.error.noAppSelected")),e(l,{disabled:"loading"===A,apps:h,selectedAppId:b?.id,onAppSelect:B}),R,C&&g({label:j.get("continue"),status:A})),I===s.QR_CODE&&e(d,{id:i.AreaId.QR,ariaLabelledBy:i.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code"},e("span",{className:"adyen-checkout-upi-instruction-label"},j.get("upi.qrCode.instruction")),R,C&&g({label:j.get("generateQRCode"),icon:y({imageFolder:"components/"})("qr"),status:A})))}export{I as default};
//# sourceMappingURL=UPIComponent.js.map
