{"version":3,"file":"ApplePaySdkLoader.js","sources":["../../../../../src/components/ApplePay/services/ApplePaySdkLoader.ts"],"sourcesContent":["import Script from '../../../utils/Script';\nimport AdyenCheckoutError from '../../../core/Errors/AdyenCheckoutError';\nimport { IAnalytics } from '../../../core/Analytics/Analytics';\n\nexport const APPLE_PAY_SDK_URL = 'https://applepay.cdn-apple.com/jsapi/1.latest/apple-pay-sdk.js';\n\nclass ApplePaySdkLoader {\n    private sdkLoadingPromise: Promise<void>;\n    private readonly analytics: IAnalytics;\n\n    constructor({ analytics }: { analytics: IAnalytics }) {\n        this.analytics = analytics;\n    }\n\n    public async load(): Promise<ApplePaySession> {\n        try {\n            const scriptElement = new Script({\n                src: APPLE_PAY_SDK_URL,\n                component: 'applepay',\n                attributes: { crossOrigin: 'anonymous' },\n                analytics: this.analytics\n            });\n\n            this.sdkLoadingPromise = scriptElement.load();\n            await this.sdkLoadingPromise;\n\n            return window?.ApplePaySession;\n        } catch (error) {\n            throw new AdyenCheckoutError('SCRIPT_ERROR', 'ApplePaySDK failed to load', { cause: error });\n        }\n    }\n\n    public isSdkLoaded(): Promise<void> {\n        if (this.sdkLoadingPromise === undefined) {\n            return Promise.reject();\n        }\n\n        return this.sdkLoadingPromise;\n    }\n}\n\nexport default ApplePaySdkLoader;\n"],"names":["APPLE_PAY_SDK_URL","ApplePaySdkLoader","load","scriptElement","Script","src","component","attributes","crossOrigin","analytics","this","sdkLoadingPromise","window","ApplePaySession","error","AdyenCheckoutError","cause","isSdkLoaded","undefined","Promise","reject","constructor","_define_property"],"mappings":"0NAIO,MAAMA,EAAoB,iEAEjC,MAAMC,EAQF,UAAaC,GACT,IACI,MAAMC,EAAgB,IAAIC,EAAO,CAC7BC,IAAKL,EACLM,UAAW,WACXC,WAAY,CAAEC,YAAa,aAC3BC,UAAWC,KAAKD,YAMpB,OAHAC,KAAKC,kBAAoBR,EAAcD,aACjCQ,KAAKC,kBAEJC,QAAQC,eACnB,CAAE,MAAOC,GACL,MAAM,IAAIC,EAAmB,eAAgB,6BAA8B,CAAEC,MAAOF,GACxF,CACJ,CAEOG,WAAAA,GACH,YAA+BC,IAA3BR,KAAKC,kBACEQ,QAAQC,SAGZV,KAAKC,iBAChB,CA5BA,WAAAU,EAAYZ,UAAEA,IAHda,EAAAZ,KAAQC,4BACRW,EAAAZ,KAAiBD,oBAGbC,KAAKD,UAAYA,CACrB"}