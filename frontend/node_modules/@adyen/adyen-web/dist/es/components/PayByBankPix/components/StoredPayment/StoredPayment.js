import{createElement as t}from"../../../../external/preact/dist/preact.js";import{useState as e,useRef as n,useCallback as o,useEffect as a}from"../../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as i}from"../../../../core/Context/CoreProvider.js";import r from"../../../../core/Context/useImage.js";import s from"../../../internal/PayButton/PayButton.js";import l from"./getAuthorizationStatus.js";import p from"../Enrollment/components/PayByBankPixAwait.js";function c({onPay:c,type:m,countdownTime:u,txVariant:f,setComponentRef:y,enrollmentId:d,initiationId:x,clientKey:b,onAuthorize:g,onError:k}){const{i18n:w,loadingContext:C}=i(),h=r(),[j,P]=e("ready"),[B,E]=e(null),I=[{name:"open-finance",alt:w.get("paybybankpix.await.logoAlt.openFinance"),src:`${h({parentFolder:`${f}/`})("open-finance")}`}],z=n({setStatus:P}),A=o(async()=>{if(B)return;const t=await l({enrollmentId:d,initiationId:x,clientKey:b,loadingContext:C});return t.authorizationOptions&&E(t.authorizationOptions),t},[B,d,x,b,C]);return a(()=>{y(z.current)},[y]),a(()=>{B&&g(B)},[B]),"await"===m?t(p,{logos:I,type:f,countdownTime:u,clientKey:b,onError:k,awaitText:w.get("paybybankpix.await.fetchDetails"),pollStatus:A}):t(s,{classNameModifiers:["standalone"],label:w.get("paybybankpix.redirectBtn.label"),status:j,onClick:c})}export{c as default};
//# sourceMappingURL=StoredPayment.js.map
