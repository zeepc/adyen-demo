{"version":3,"file":"Fastlane.js","sources":["../../../../src/components/PayPalFastlane/Fastlane.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement';\nimport { TxVariants } from '../tx-variants';\nimport FastlaneComponent from './components/FastlaneComponent';\nimport type { FastlaneConfiguration } from './types';\n\nclass Fastlane extends UIElement<FastlaneConfiguration> {\n    public static readonly type = TxVariants.fastlane;\n\n    protected static defaultProps = {\n        keepBrandsVisible: true\n    };\n\n    protected override formatData() {\n        return {\n            paymentMethod: {\n                type: Fastlane.type,\n                fastlaneData: btoa(\n                    JSON.stringify({\n                        fastlaneSessionId: this.props.fastlaneSessionId,\n                        tokenId: this.props.tokenId\n                    })\n                )\n            }\n        };\n    }\n\n    /**\n     *\n     * Fastlane works differently than other payment methods: Merchant needs to pass to the payment method\n     * configuration the values received from PayPal SDK to perform the payment (tokenId, etc). There is no\n     * point in tracking these values, so we just omit them all in the analytics by calling the\n     * 'beforeRender' without the props\n     *\n     * @protected\n     */\n    protected override beforeRender() {\n        super.beforeRender();\n    }\n\n    public override async isAvailable(): Promise<void> {\n        const { tokenId, lastFour, brand, email } = this.props;\n        if (tokenId && lastFour && brand && email) {\n            return Promise.resolve();\n        }\n        return Promise.reject();\n    }\n\n    public override get isValid(): boolean {\n        return true;\n    }\n\n    /**\n     * Used to display payment method logo within Drop-in\n     */\n    public override get icon(): string {\n        return this.props.icon ?? this.resources.getImage()('card');\n    }\n\n    /**\n     * Used to display the payment method supported brands within Drop-in\n     */\n    public get brands(): { icon: string; name: string }[] {\n        const { brands } = this.props;\n        return brands.map(brand => ({ icon: this.props.modules.resources.getImage()(brand), name: brand }));\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return (\n            <FastlaneComponent\n                lastFour={this.props.lastFour}\n                brand={this.props.brand}\n                payButton={this.payButton}\n                setComponentRef={this.setComponentRef}\n                showPayButton={this.props.showPayButton}\n            />\n        );\n    }\n}\n\nexport default Fastlane;\n"],"names":["Fastlane","UIElement","formatData","paymentMethod","type","fastlaneData","btoa","JSON","stringify","fastlaneSessionId","this","props","tokenId","beforeRender","super","isAvailable","lastFour","brand","email","Promise","resolve","reject","isValid","icon","resources","getImage","brands","map","modules","name","componentToRender","h","FastlaneComponent","payButton","setComponentRef","showPayButton","_define_property","TxVariants","fastlane","defaultProps","keepBrandsVisible"],"mappings":"4VAMA,MAAMA,UAAiBC,EAOAC,UAAAA,GACf,MAAO,CACHC,cAAe,CACXC,KAAMJ,EAASI,KACfC,aAAcC,KACVC,KAAKC,UAAU,CACXC,kBAAmBC,KAAKC,MAAMF,kBAC9BG,QAASF,KAAKC,MAAMC,YAKxC,CAWA,YAAAC,GACIC,MAAMD,cACV,CAEA,iBAAsBE,GAClB,MAAMH,QAAEA,EAAOI,SAAEA,EAAQC,MAAEA,EAAKC,MAAEA,GAAUR,KAAKC,MACjD,OAAIC,GAAWI,GAAYC,GAASC,EACzBC,QAAQC,UAEZD,QAAQE,QACnB,CAEA,WAAoBC,GAChB,OAAO,CACX,CAKA,QAAoBC,GAChB,OAAOb,KAAKC,MAAMY,MAAQb,KAAKc,UAAUC,UAAff,CAA0B,OACxD,CAKA,UAAWgB,GACP,MAAMA,OAAEA,GAAWhB,KAAKC,MACxB,OAAOe,EAAOC,IAAIV,KAAYM,KAAMb,KAAKC,MAAMiB,QAAQJ,UAAUC,UAA7Bf,CAAwCO,GAAQY,KAAMZ,IAC9F,CAEmBa,iBAAAA,GACf,OACIC,EAACC,EAAAA,CACGhB,SAAUN,KAAKC,MAAMK,SACrBC,MAAOP,KAAKC,MAAMM,MAClBgB,UAAWvB,KAAKuB,UAChBC,gBAAiBxB,KAAKwB,gBACtBC,cAAezB,KAAKC,MAAMwB,eAGtC,EAtEAC,EADEpC,EACqBI,OAAOiC,EAAWC,UAEzCF,EAHEpC,EAGeuC,eAAe,CAC5BC,mBAAmB"}