{"version":3,"file":"Dragonpay.js","sources":["../../../../src/components/Dragonpay/Dragonpay.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport DragonpayInput from './components/DragonpayInput';\nimport DragonpayVoucherResult from './components/DragonpayVoucherResult';\nimport { DragonpayConfiguraton } from './types';\nimport { TxVariants } from '../tx-variants';\n\nexport class DragonpayElement extends UIElement<DragonpayConfiguraton> {\n    public static type = TxVariants.dragonpay;\n\n    public static txVariants = [\n        TxVariants.dragonpay,\n        TxVariants.dragonpay_ebanking,\n        TxVariants.dragonpay_otc_banking,\n        TxVariants.dragonpay_otc_non_banking,\n        TxVariants.dragonpay_otc_philippines\n    ];\n\n    get isValid() {\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        const { issuer, shopperEmail } = this.state.data;\n\n        return {\n            ...(shopperEmail && { shopperEmail }),\n            paymentMethod: {\n                ...(issuer && { issuer }),\n                type: this.type\n            }\n        };\n    }\n\n    protected formatProps(props: DragonpayConfiguraton) {\n        return {\n            ...props,\n            issuers: props.details?.find(detail => detail.key === 'issuer')?.items ?? props.issuers\n        };\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return this.props.reference ? (\n            <DragonpayVoucherResult\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                icon={this.icon}\n                {...this.props}\n                onActionHandled={this.onActionHandled}\n            />\n        ) : (\n            <DragonpayInput\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                items={this.props.issuers}\n                {...this.props}\n                showPayButton={this.props.showPayButton}\n                onChange={this.setState}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n            />\n        );\n    }\n}\n\nexport default DragonpayElement;\n"],"names":["DragonpayElement","UIElement","isValid","this","state","formatData","issuer","shopperEmail","data","paymentMethod","type","formatProps","props","issuers","details","find","detail","key","items","componentToRender","reference","h","DragonpayVoucherResult","ref","componentRef","icon","onActionHandled","DragonpayInput","showPayButton","onChange","setState","onSubmit","submit","payButton","_define_property","TxVariants","dragonpay","txVariants","dragonpay_ebanking","dragonpay_otc_banking","dragonpay_otc_non_banking","dragonpay_otc_philippines"],"mappings":"qbAOO,MAAMA,UAAyBC,EAWlC,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAKAG,UAAAA,GACI,MAAMC,OAAEA,EAAMC,aAAEA,GAAiBJ,KAAKC,MAAMI,KAE5C,MAAO,IACCD,GAAgB,CAAEA,gBACtBE,cAAe,IACPH,GAAU,CAAEA,UAChBI,KAAMP,KAAKO,MAGvB,CAEUC,WAAAA,CAAYC,GAClB,MAAO,IACAA,EACHC,QAASD,EAAME,SAASC,KAAKC,GAAyB,WAAfA,EAAOC,MAAmBC,OAASN,EAAMC,QAExF,CAEmBM,iBAAAA,GACf,OAAOhB,KAAKS,MAAMQ,UACdC,EAACC,EAAAA,CACGC,IAAKA,IACDpB,KAAKqB,aAAeD,GAExBE,KAAMtB,KAAKsB,QACPtB,KAAKS,MACTc,gBAAiBvB,KAAKuB,kBAG1BL,EAACM,EAAAA,CACGJ,IAAKA,IACDpB,KAAKqB,aAAeD,GAExBL,MAAOf,KAAKS,MAAMC,WACdV,KAAKS,MACTgB,cAAezB,KAAKS,MAAMgB,cAC1BC,SAAU1B,KAAK2B,SACfC,SAAU5B,KAAK6B,OACfC,UAAW9B,KAAK8B,WAG5B,EA3DAC,EADSlC,EACKU,OAAOyB,EAAWC,WAEhCF,EAHSlC,EAGKqC,aAAa,CACvBF,EAAWC,UACXD,EAAWG,mBACXH,EAAWI,sBACXJ,EAAWK,0BACXL,EAAWM"}