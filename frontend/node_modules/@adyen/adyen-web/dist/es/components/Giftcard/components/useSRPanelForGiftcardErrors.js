import{useState as e,useEffect as s}from"../../../external/preact/hooks/dist/hooks.js";import r from"../../../core/Errors/useSRPanelContext.js";import{usePrevious as o}from"../../../utils/hookUtils.js";import{ERROR_ACTION_BLUR_SCENARIO as t,ERROR_ACTION_FOCUS_FIELD as i}from"../../../core/Errors/constants.js";import{getArrayDifferences as a}from"../../../utils/arrayUtils.js";import c from"../../internal/SecuredFields/lib/CSF/utils/userAgent.js";import{windowScrollTo as l}from"../../../utils/windowScrollTo.js";const n=({errors:n,isValidating:u,setIsValidating:d,sfp:m})=>{const[f,S]=e(null),p=o(f),{setSRMessagesFromObjects:y,setSRMessagesFromStrings:g,clearSRPanel:j,shouldMoveFocusSR:F}=r(),h=["encryptedCardNumber","encryptedExpiryDate","encryptedSecurityCode"];s(()=>{try{const e=y?.({}),s=e?.({errors:n,isValidating:u,layout:h}),r=s?.currentErrorsSortedByLayout;switch(S(r),s?.action){case i:if(F&&u){if(c.__IS_IOS){const e=m?.getRootNode(),r=e?.querySelector(`[data-id="${s?.fieldToFocus}"]`);l(r)}m?.setFocusOn(s?.fieldToFocus)}setTimeout(()=>{d(!1)},300);break;case t:{const e=a(r,p,"field"),s=e?.[0];if(s){const e=!0?s.errorMessage:null;g(e)}else j();break}}}catch(e){}},[n])};export{n as useSRPanelForGiftcardErrors};
//# sourceMappingURL=useSRPanelForGiftcardErrors.js.map
