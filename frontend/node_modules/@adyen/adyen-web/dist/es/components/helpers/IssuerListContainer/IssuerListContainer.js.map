{"version":3,"file":"IssuerListContainer.js","sources":["../../../../../src/components/helpers/IssuerListContainer/IssuerListContainer.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../../internal/UIElement/UIElement';\nimport IssuerList from '../../internal/IssuerList';\nimport getIssuerImageUrl from '../../../utils/get-issuer-image';\nimport { FALLBACK_CONTEXT } from '../../../core/config';\nimport RedirectButton from '../../internal/RedirectButton';\nimport { IssuerListConfiguration, IssuerListData } from './types';\nimport type { ICore } from '../../../core/types';\n\nclass IssuerListContainer<TProps extends IssuerListConfiguration = IssuerListConfiguration, TData = IssuerListData> extends UIElement<TProps> {\n    protected static defaultProps = {\n        showImage: true,\n        issuers: [],\n        highlightedIssuers: [],\n        loadingContext: FALLBACK_CONTEXT,\n        showPaymentMethodItemImages: false\n    };\n\n    constructor(checkout: ICore, props?: TProps) {\n        super(checkout, props);\n\n        const getImage = props => this.resources.getImage(props);\n\n        if (this.props.showImage) {\n            const getIssuerIcon = getIssuerImageUrl({ loadingContext: this.props.loadingContext }, this.constructor['type'], getImage);\n\n            this.props.issuers = this.props.issuers.map(item => ({\n                ...item,\n                icon: getIssuerIcon(item.id)\n            }));\n        }\n    }\n\n    formatProps(props) {\n        const issuers = (props.details && props.details.length && (props.details.find(d => d.key === 'issuer') || {}).items) || props.issuers || [];\n        return { ...props, issuers };\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData(): TData {\n        return {\n            paymentMethod: {\n                type: this.type,\n                issuer: this.state?.data?.issuer\n            }\n        } as TData;\n    }\n\n    /**\n     * Returns whether the component state is valid or not\n     */\n    get isValid() {\n        if (this.props.issuers.length === 0) {\n            return true;\n        }\n        return !!this.state?.isValid;\n    }\n\n    /**\n     * Returns brands array (similar to card) depending on showPaymentMethodItemImages\n     * This is used to show the brands in the PaymentMethodItem\n     * Requires brands icons to be loaded in the payment method\n     */\n    get brands(): { icon: any; name: string }[] {\n        if (this.props.showPaymentMethodItemImages) {\n            return this.props.issuers.map(brand => {\n                const brandIcon = brand.icon;\n                return { icon: brandIcon, name: brand.id };\n            });\n        }\n\n        return [];\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return this.props.issuers.length > 0 ? (\n            <IssuerList\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                items={this.props.issuers}\n                highlightedIds={this.props.highlightedIssuers}\n                {...this.props}\n                {...this.state}\n                showImage={this.props.showImage}\n                type={this.constructor['type']}\n                onChange={this.setState}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n                contextualText={this.props.i18n.get('issuerList.selectField.contextualText')}\n                onSubmitAnalytics={this.submitAnalytics}\n            />\n        ) : (\n            <RedirectButton\n                showPayButton={this.props.showPayButton}\n                name={this.props.name}\n                {...this.props}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n            />\n        );\n    }\n}\n\nexport default IssuerListContainer;\n"],"names":["IssuerListContainer","UIElement","formatProps","props","issuers","details","length","find","d","key","items","formatData","paymentMethod","type","this","issuer","state","data","isValid","brands","showPaymentMethodItemImages","map","brand","icon","name","id","componentToRender","h","IssuerList","ref","componentRef","highlightedIds","highlightedIssuers","showImage","constructor","onChange","setState","onSubmit","submit","payButton","contextualText","i18n","get","onSubmitAnalytics","submitAnalytics","RedirectButton","showPayButton","checkout","super","getImage","resources","getIssuerIcon","getIssuerImageUrl","loadingContext","item","FALLBACK_CONTEXT","defaultProps"],"mappings":"6WASA,MAAMA,UAAsHC,EAwBxHC,WAAAA,CAAYC,GACR,MAAMC,EAAWD,EAAME,SAAWF,EAAME,QAAQC,SAAWH,EAAME,QAAQE,KAAKC,GAAe,WAAVA,EAAEC,MAAqB,CAAA,GAAIC,OAAUP,EAAMC,SAAW,GACzI,MAAO,IAAKD,EAAOC,UACvB,CAKAO,UAAAA,GACI,MAAO,CACHC,cAAe,CACXC,KAAMC,KAAKD,KACXE,OAAQD,KAAKE,OAAOC,MAAMF,QAGtC,CAKA,WAAIG,GACA,OAAkC,IAA9BJ,KAAKX,MAAMC,QAAQE,UAGdQ,KAAKE,OAAOE,OACzB,CAOA,UAAIC,GACA,OAAIL,KAAKX,MAAMiB,4BACJN,KAAKX,MAAMC,QAAQiB,IAAIC,IAEnB,CAAEC,KADSD,EAAMC,KACEC,KAAMF,EAAMG,MAIvC,EACX,CAEmBC,iBAAAA,GACf,OAAOZ,KAAKX,MAAMC,QAAQE,OAAS,EAC/BqB,EAACC,EAAAA,CACGC,IAAKA,IACDf,KAAKgB,aAAeD,GAExBnB,MAAOI,KAAKX,MAAMC,QAClB2B,eAAgBjB,KAAKX,MAAM6B,sBACvBlB,KAAKX,SACLW,KAAKE,MACTiB,UAAWnB,KAAKX,MAAM8B,UACtBpB,KAAMC,KAAKoB,YAAY,KACvBC,SAAUrB,KAAKsB,SACfC,SAAUvB,KAAKwB,OACfC,UAAWzB,KAAKyB,UAChBC,eAAgB1B,KAAKX,MAAMsC,KAAKC,IAAI,yCACpCC,kBAAmB7B,KAAK8B,kBAG5BjB,EAACkB,EAAAA,CACGC,cAAehC,KAAKX,MAAM2C,cAC1BtB,KAAMV,KAAKX,MAAMqB,QACbV,KAAKX,MACTkC,SAAUvB,KAAKwB,OACfC,UAAWzB,KAAKyB,UAChBV,IAAKA,IACDf,KAAKgB,aAAeD,IAIpC,CAxFA,WAAAK,CAAYa,EAAiB5C,GACzB6C,MAAMD,EAAU5C,GAEhB,MAAM8C,EAAW9C,GAASW,KAAKoC,UAAUD,SAAS9C,GAElD,GAAIW,KAAKX,MAAM8B,UAAW,CACtB,MAAMkB,EAAgBC,EAAkB,CAAEC,eAAgBvC,KAAKX,MAAMkD,gBAAkBvC,KAAKoB,iBAAqBe,GAEjHnC,KAAKX,MAAMC,QAAUU,KAAKX,MAAMC,QAAQiB,IAAIiC,QACrCA,EACH/B,KAAM4B,EAAcG,EAAK7B,MAEjC,CACJ,cArBgC,CAC5BQ,WAAW,EACX7B,QAAS,GACT4B,mBAAoB,GACpBqB,eAAgBE,EAChBnC,6BAA6B,MALhBoC,oBADfxD"}