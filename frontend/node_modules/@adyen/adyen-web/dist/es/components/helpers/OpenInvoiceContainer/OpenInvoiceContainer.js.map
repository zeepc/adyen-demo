{"version":3,"file":"OpenInvoiceContainer.js","sources":["../../../../../src/components/helpers/OpenInvoiceContainer/OpenInvoiceContainer.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../../internal/UIElement/UIElement';\nimport OpenInvoice from '../../internal/OpenInvoice';\nimport { OpenInvoiceConfiguration } from './types';\n\nexport default class OpenInvoiceContainer extends UIElement<OpenInvoiceConfiguration> {\n    protected static defaultProps: Partial<OpenInvoiceConfiguration> = {\n        onChange: () => {},\n        data: { companyDetails: {}, personalDetails: {}, billingAddress: {}, deliveryAddress: {}, bankAccount: {} },\n        visibility: {\n            companyDetails: 'hidden',\n            personalDetails: 'editable',\n            billingAddress: 'editable',\n            deliveryAddress: 'editable',\n            bankAccount: 'hidden'\n        }\n    };\n\n    /**\n     * Returns whether the component state is valid or not\n     */\n    get isValid() {\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats props on construction time\n     */\n    formatProps(props) {\n        const country = props.countryCode || props.data?.billingAddress?.countryCode;\n\n        return {\n            ...props,\n            allowedCountries: [country],\n            visibility: {\n                ...OpenInvoiceContainer.defaultProps.visibility,\n                ...props.visibility\n            },\n            data: {\n                ...props.data,\n                billingAddress: {\n                    ...props.data.billingAddress,\n                    country\n                },\n                deliveryAddress: {\n                    ...props.data.deliveryAddress,\n                    country\n                }\n            }\n        };\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        const { data = {} } = this.state;\n        const { companyDetails = {}, personalDetails = {}, billingAddress, deliveryAddress, bankAccount } = data;\n\n        return {\n            paymentMethod: {\n                type: this.constructor['type']\n            },\n            ...personalDetails,\n            ...companyDetails,\n            ...(bankAccount && {\n                bankAccount: {\n                    iban: bankAccount.ibanNumber,\n                    ownerName: bankAccount.ownerName,\n                    countryCode: bankAccount.countryCode\n                }\n            }),\n            ...(billingAddress && { billingAddress }),\n            ...((deliveryAddress || billingAddress) && { deliveryAddress: deliveryAddress || billingAddress })\n        };\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return (\n            <OpenInvoice\n                setComponentRef={this.setComponentRef}\n                {...this.props}\n                {...this.state}\n                onChange={this.setState}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n            />\n        );\n    }\n}\n"],"names":["OpenInvoiceContainer","UIElement","isValid","this","state","formatProps","props","country","countryCode","data","billingAddress","allowedCountries","visibility","defaultProps","deliveryAddress","formatData","companyDetails","personalDetails","bankAccount","paymentMethod","type","constructor","iban","ibanNumber","ownerName","componentToRender","h","OpenInvoice","setComponentRef","onChange","setState","onSubmit","submit","payButton"],"mappings":"mMAKe,MAAMA,UAA6BC,EAgB9C,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAKAG,WAAAA,CAAYC,GACR,MAAMC,EAAUD,EAAME,aAAeF,EAAMG,MAAMC,gBAAgBF,YAEjE,MAAO,IACAF,EACHK,iBAAkB,CAACJ,GACnBK,WAAY,IACLZ,EAAqBa,aAAaD,cAClCN,EAAMM,YAEbH,KAAM,IACCH,EAAMG,KACTC,eAAgB,IACTJ,EAAMG,KAAKC,eACdH,WAEJO,gBAAiB,IACVR,EAAMG,KAAKK,gBACdP,YAIhB,CAKAQ,UAAAA,GACI,MAAMN,KAAEA,EAAO,IAAON,KAAKC,OACrBY,eAAEA,EAAiB,CAAA,EAAEC,gBAAEA,EAAkB,CAAA,EAAEP,eAAEA,EAAcI,gBAAEA,EAAeI,YAAEA,GAAgBT,EAEpG,MAAO,CACHU,cAAe,CACXC,KAAMjB,KAAKkB,YAAY,SAExBJ,KACAD,KACCE,GAAe,CACfA,YAAa,CACTI,KAAMJ,EAAYK,WAClBC,UAAWN,EAAYM,UACvBhB,YAAaU,EAAYV,iBAG7BE,GAAkB,CAAEA,sBACnBI,GAAmBJ,IAAmB,CAAEI,gBAAiBA,GAAmBJ,GAEzF,CAEmBe,iBAAAA,GACf,OACIC,EAACC,EAAAA,CACGC,gBAAiBzB,KAAKyB,mBAClBzB,KAAKG,SACLH,KAAKC,MACTyB,SAAU1B,KAAK2B,SACfC,SAAU5B,KAAK6B,OACfC,UAAW9B,KAAK8B,WAG5B,cAlFmE,CAC/DJ,SAAU,OACVpB,KAAM,CAAEO,eAAgB,CAAA,EAAIC,gBAAiB,CAAA,EAAIP,eAAgB,CAAA,EAAII,gBAAiB,CAAA,EAAII,YAAa,CAAA,GACvGN,WAAY,CACRI,eAAgB,SAChBC,gBAAiB,WACjBP,eAAgB,WAChBI,gBAAiB,WACjBI,YAAa,cARJL,oBADAb"}