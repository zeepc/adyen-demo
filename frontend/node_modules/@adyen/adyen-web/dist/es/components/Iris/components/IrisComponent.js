import{createElement as t}from"../../../external/preact/dist/preact.js";import{IrisMode as e}from"../types.js";import{useState as o,useMemo as s,useRef as n,useEffect as r}from"../../../external/preact/hooks/dist/hooks.js";import{IRIS_ALLY_LABELS as a}from"../constants.js";import{getIrisSegmentedControlOptions as i}from"../utils.js";import{useCoreContext as d}from"../../../core/Context/CoreProvider.js";import{SegmentedControl as l}from"../../internal/SegmentedControl/SegmentedControl.js";import{SegmentedControlRegion as m}from"../../internal/SegmentedControl/SegmentedControlRegion.js";import u from"./IrisGenerateQRCode.js";import p from"./IrisComponent.module.scss.js";import{AnalyticsInfoEvent as c,UiTarget as f,InfoEventType as y}from"../../../core/Analytics/events/AnalyticsInfoEvent.js";import{TxVariants as C}from"../../tx-variants.js";import B from"../../../core/Analytics/useAnalytics.js";function j(j){const{i18n:g}=d(),{analytics:A}=B(),[I,R]=o(j.defaultMode),[S,h]=o("ready"),E=s(()=>i(g,j.defaultMode),[g,j.defaultMode]),L=j.issuers.length>0,_=(t,e=!1)=>{if(R(t),j.onUpdateMode(t),e){const e=new c({type:y.selected,target:f.segmentedControl,component:C.iris,selectedValue:t});A.sendAnalytics(e)}},w=n({setStatus:h});return r(()=>{j.setComponentRef(w.current)},[j.setComponentRef]),r(()=>{if(L){const t=new c({type:y.displayed,target:f.segmentedControl,component:C.iris,selectedValue:j.defaultMode});A.sendAnalytics(t)}},[]),r(()=>{L||_(e.QR_CODE)},[L]),L?t("div",null,t(l,{onChange:t=>_(t,!0),selectedValue:I,disabled:"loading"===S,options:E}),I===e.BANK_LIST&&t(m,{id:a.AreaId.BANK_LIST,ariaLabelledBy:a.ButtonId.BANK_LIST,className:p.bankList},j.issuerListUI),I===e.QR_CODE&&t(m,{id:a.AreaId.QR_CODE,ariaLabelledBy:a.ButtonId.QR_CODE},t(u,{showPayButton:j.showPayButton,payButton:j.payButton,status:S}))):t(u,{showPayButton:j.showPayButton,payButton:j.payButton,status:S})}export{j as default};
//# sourceMappingURL=IrisComponent.js.map
