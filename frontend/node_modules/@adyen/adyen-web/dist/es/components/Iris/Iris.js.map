{"version":3,"file":"Iris.js","sources":["../../../../src/components/Iris/Iris.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { ICore } from '../../types';\nimport isMobile from '../../utils/isMobile';\nimport IssuerListContainer from '../helpers/IssuerListContainer/IssuerListContainer';\nimport { QRLoader } from '../internal/QRLoader';\nimport { TxVariants } from '../tx-variants';\nimport IrisComponent from './components/IrisComponent';\nimport { IrisQrCodeInstructions } from './components/IrisQrCodeInstructions';\nimport { IrisConfiguration, IrisData, IrisMode } from './types';\nimport { DEFAULT_IRIS_COUNTDOWN_TIME } from './constants';\n\nexport class Iris extends IssuerListContainer<IrisConfiguration, IrisData> {\n    public static readonly type = TxVariants.iris;\n\n    private mode: IrisMode;\n\n    constructor(checkout: ICore, props: IrisConfiguration) {\n        super(checkout, props);\n        this.mode = isMobile() ? IrisMode.BANK_LIST : IrisMode.QR_CODE;\n    }\n\n    private readonly onUpdateMode = (mode: IrisMode): void => {\n        this.mode = mode;\n    };\n\n    private renderIssuerList(): h.JSX.Element {\n        return super.componentToRender();\n    }\n\n    formatData(): IrisData {\n        if (this.mode === IrisMode.BANK_LIST) {\n            return {\n                paymentMethod: {\n                    type: this.type,\n                    issuer: this.state?.data?.issuer\n                }\n            };\n        }\n\n        return {\n            paymentMethod: {\n                type: this.type\n            }\n        };\n    }\n\n    formatProps(props: IrisConfiguration): IrisConfiguration {\n        return {\n            ...super.formatProps(props),\n            countdownTime: props.countdownTime ?? DEFAULT_IRIS_COUNTDOWN_TIME\n        };\n    }\n\n    get isValid() {\n        if (this.mode === IrisMode.BANK_LIST) {\n            return super.isValid;\n        }\n\n        return true;\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        if (this.props.type === 'qrCode') {\n            return (\n                <QRLoader\n                    type={TxVariants.iris}\n                    brandLogo={this.icon}\n                    clientKey={this.props.clientKey}\n                    qrCodeData={this.props.qrCodeData ? encodeURIComponent(this.props.qrCodeData) : null}\n                    countdownTime={this.props.countdownTime}\n                    paymentData={this.props.paymentData}\n                    delay={this.props.delay}\n                    onActionHandled={this.onActionHandled}\n                    onError={this.props.onError}\n                    onComplete={this.onComplete}\n                    introduction={IrisQrCodeInstructions}\n                    showAmount\n                    copyBtn={false}\n                />\n            );\n        }\n\n        return (\n            <IrisComponent\n                setComponentRef={this.setComponentRef}\n                defaultMode={this.mode}\n                onUpdateMode={this.onUpdateMode}\n                issuerListUI={this.renderIssuerList()}\n                showPayButton={this.props.showPayButton}\n                payButton={this.payButton}\n                issuers={this.props.issuers}\n            />\n        );\n    }\n}\n\nexport default Iris;\n"],"names":["Iris","IssuerListContainer","renderIssuerList","super","componentToRender","formatData","this","mode","IrisMode","BANK_LIST","paymentMethod","type","issuer","state","data","formatProps","props","countdownTime","DEFAULT_IRIS_COUNTDOWN_TIME","isValid","h","QRLoader","TxVariants","iris","brandLogo","icon","clientKey","qrCodeData","encodeURIComponent","paymentData","delay","onActionHandled","onError","onComplete","introduction","IrisQrCodeInstructions","showAmount","copyBtn","IrisComponent","setComponentRef","defaultMode","onUpdateMode","issuerListUI","showPayButton","payButton","issuers","constructor","checkout","_define_property","isMobile","QR_CODE"],"mappings":"04BAWO,MAAMA,UAAaC,EAcdC,gBAAAA,GACJ,OAAOC,MAAMC,mBACjB,CAEAC,UAAAA,GACI,OAAIC,KAAKC,OAASC,EAASC,UAChB,CACHC,cAAe,CACXC,KAAML,KAAKK,KACXC,OAAQN,KAAKO,OAAOC,MAAMF,SAK/B,CACHF,cAAe,CACXC,KAAML,KAAKK,MAGvB,CAEAI,WAAAA,CAAYC,GACR,MAAO,IACAb,MAAMY,YAAYC,GACrBC,cAAeD,EAAMC,eAAiBC,EAE9C,CAEA,WAAIC,GACA,OAAIb,KAAKC,OAASC,EAASC,WAChBN,MAAMgB,OAIrB,CAEmBf,iBAAAA,GACf,MAAwB,WAApBE,KAAKU,MAAML,KAEPS,EAACC,EAAAA,CACGV,KAAMW,EAAWC,KACjBC,UAAWlB,KAAKmB,KAChBC,UAAWpB,KAAKU,MAAMU,UACtBC,WAAYrB,KAAKU,MAAMW,WAAaC,mBAAmBtB,KAAKU,MAAMW,YAAc,KAChFV,cAAeX,KAAKU,MAAMC,cAC1BY,YAAavB,KAAKU,MAAMa,YACxBC,MAAOxB,KAAKU,MAAMc,MAClBC,gBAAiBzB,KAAKyB,gBACtBC,QAAS1B,KAAKU,MAAMgB,QACpBC,WAAY3B,KAAK2B,WACjBC,aAAcC,EACdC,YAAAA,EACAC,SAAS,IAMjBjB,EAACkB,EAAAA,CACGC,gBAAiBjC,KAAKiC,gBACtBC,YAAalC,KAAKC,KAClBkC,aAAcnC,KAAKmC,aACnBC,aAAcpC,KAAKJ,mBACnByC,cAAerC,KAAKU,MAAM2B,cAC1BC,UAAWtC,KAAKsC,UAChBC,QAASvC,KAAKU,MAAM6B,SAGhC,CA7EA,WAAAC,CAAYC,EAAiB/B,GACzBb,MAAM4C,EAAU/B,GAHpBgC,EAAA1C,KAAQC,YAAR,GAOAyC,EAAA1C,KAAiBmC,eAAgBlC,IAC7BD,KAAKC,KAAOA,IAJZD,KAAKC,KAAO0C,IAAazC,EAASC,UAAYD,EAAS0C,OAC3D,EAPAF,EADShD,EACcW,OAAOW,EAAWC"}