import{createElement as e}from"../../../external/preact/dist/preact.js";import{useState as a,useRef as t,useEffect as n}from"../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as o}from"../../../core/Context/CoreProvider.js";import r from"../../internal/FormFields/Fieldset/Fieldset.js";import l from"../../internal/FormInstruction/FormInstruction.js";import i from"../../../utils/useForm/useForm.js";import s from"../../internal/FormFields/Field/Field.js";import u from"../../internal/FormFields/InputText.js";import{preAuthorizedDebitCanadaValidationRules as d,preAuthorizedDebitCanadaFormatters as m}from"./validate.js";import c from"../../internal/StoreDetails/StoreDetails.js";import b from"../../../core/Context/useImage.js";import{SettlementInfo as p}from"./SettlementInfo.js";function k({onChange:k,payButton:f,showPayButton:N,placeholders:g,setComponentRef:x,enableStoreDetails:h,showContextualElement:C=!0}){const I=b(),{i18n:w}=o(),[F,j]=a("ready"),{handleChangeFor:M,triggerValidation:A,data:L,errors:v,valid:V,isValid:T}=i({schema:["ownerName","bankAccountNumber","bankCode","bankLocationId"],rules:d,formatters:m}),[y,B]=a(!1),E="loading"===F,S=t({setStatus:j,showValidation:()=>{A()}});return n(()=>{x(S.current)},[x,S.current]),n(()=>{k({data:L,valid:V,errors:v,isValid:T,storePaymentMethod:y})},[k,L,V,v,T,y]),e("div",{className:"adyen-checkout__eftpad-canada"},e(l,null),e(r,null,e(s,{label:w.get("eftpad-canada.input.accountHolderName.label"),errorMessage:!!v.ownerName&&w.get(v.ownerName.errorMessage),isValid:!!V.ownerName,name:"ownerName"},e(u,{disabled:E,name:"ownerName",placeholder:g?.ownerName,value:L.ownerName,onInput:M("ownerName","input"),onBlur:M("ownerName","blur"),required:!0,"data-testid":"owner-name"})),e(s,{label:w.get("eftpad-canada.input.accountNumber.label"),errorMessage:!!v.bankAccountNumber&&w.get(v.bankAccountNumber.errorMessage),name:"bankAccountNumber",isValid:!!V.bankAccountNumber,showContextualElement:C,contextualText:w.get("eftpad-canada.input.accountNumber.contextualText")},e(u,{disabled:E,name:"bankAccountNumber",placeholder:g?.bankAccountNumber,value:L.bankAccountNumber,onInput:M("bankAccountNumber","input"),onBlur:M("bankAccountNumber","blur"),required:!0,maxlength:12})),e(s,{label:w.get("eftpad-canada.input.institutionNumber.label"),classNameModifiers:["col-50"],errorMessage:!!v.bankCode&&w.get(v.bankCode.errorMessage),isValid:!!V.bankCode,name:"bankCode",showContextualElement:C,contextualText:w.get("eftpad-canada.input.institutionNumber.contextualText")},e(u,{disabled:E,name:"bankCode",placeholder:g?.bankCode,value:L.bankCode,onInput:M("bankCode","input"),onBlur:M("bankCode","blur"),required:!0,maxlength:3})),e(s,{label:w.get("eftpad-canada.input.transitNumber.label"),classNameModifiers:["col-50"],errorMessage:!!v.bankLocationId&&w.get(v.bankLocationId.errorMessage),name:"bankLocationId",isValid:!!V.bankLocationId,showContextualElement:C,contextualText:w.get("eftpad-canada.input.transitNumber.contextualText")},e(u,{disabled:E,name:"bankLocationId",placeholder:g?.bankLocationId,value:L.bankLocationId,onInput:M("bankLocationId","input"),onBlur:M("bankLocationId","blur"),required:!0,maxlength:5}))),h&&e(c,{className:"adyen-checkout_eftpad-canada-store-details",disabled:E,onChange:B}),e(p,null),N&&f({status:F,icon:I({imageFolder:"components/"})("bento_lock")}))}export{k as default};
//# sourceMappingURL=PreAuthorizedDebitCanadaComponent.js.map
