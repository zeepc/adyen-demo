{"version":3,"file":"Language.js","sources":["../../../src/language/Language.ts"],"sourcesContent":["import { getTranslation } from './utils';\nimport { getLocalisedAmount } from '../utils/amount-util';\nimport AdyenCheckoutError from '../core/Errors/AdyenCheckoutError';\nimport type { CustomTranslations, LanguageOptions, Translations } from './types';\n\nexport class Language {\n    public readonly locale: string;\n    public readonly languageCode: string;\n\n    private readonly translations: Translations;\n    private readonly customTranslations: CustomTranslations;\n\n    public readonly timeFormatOptions: Intl.DateTimeFormatOptions = {\n        hour: 'numeric',\n        minute: 'numeric'\n    };\n    public readonly timeAndDateFormatOptions: Intl.DateTimeFormatOptions = {\n        year: 'numeric',\n        month: '2-digit',\n        day: '2-digit',\n        ...this.timeFormatOptions\n    };\n    public readonly timeAndDateFormatter: Intl.DateTimeFormat;\n\n    constructor(props: LanguageOptions) {\n        const { locale, translations, customTranslations } = props;\n\n        if (!locale) {\n            throw new AdyenCheckoutError('IMPLEMENTATION_ERROR', 'Language: \"locale\" property is not defined');\n        }\n\n        this.locale = locale;\n        this.languageCode = this.locale.split('-')[0];\n        this.customTranslations = customTranslations || {};\n\n        this.timeAndDateFormatter = Intl.DateTimeFormat(this.locale, this.timeAndDateFormatOptions);\n\n        this.translations = {\n            ...translations,\n            ...(!!this.customTranslations[this.locale] && this.customTranslations[this.locale])\n        };\n    }\n\n    /**\n     * Returns a translated string from a key in the current {@link Language.locale}\n     * @param key - Translation key\n     * @param options - Translation options\n     * @returns Translated string\n     */\n    public get(key: string, options?): string {\n        const translation = getTranslation(this.translations, key, options);\n        if (translation !== null) {\n            return translation;\n        }\n\n        return key;\n    }\n\n    /**\n     * Returns a localized string for an amount\n     * @param amount - Amount to be converted\n     * @param currencyCode - Currency code of the amount\n     * @param options - Options for String.prototype.toLocaleString\n     */\n    public amount(amount: number, currencyCode: string, options?: object): string {\n        return getLocalisedAmount(amount, this.locale, currencyCode, options);\n    }\n\n    /**\n     * Returns a localized string for a date\n     * @param date - Date to be localized\n     * @param options - Options for {@link Intl.DateTimeFormatOptions}\n     */\n    public date(date: string, options: Intl.DateTimeFormatOptions = {}) {\n        if (date === undefined) return '';\n        const dateOptions: Intl.DateTimeFormatOptions = { year: 'numeric', month: '2-digit', day: '2-digit', ...options };\n        return new Date(date).toLocaleDateString(this.locale, dateOptions);\n    }\n\n    /**\n     * Returns a localized string for a date and time\n     * @param date - Date to be localized\n     */\n    public dateTime(date: string) {\n        if (date === undefined) return '';\n        return this.timeAndDateFormatter.format(new Date(date));\n    }\n}\n\nexport default Language;\n"],"names":["Language","get","key","options","translation","getTranslation","this","translations","amount","currencyCode","getLocalisedAmount","locale","date","undefined","dateOptions","_object_spread","year","month","day","Date","toLocaleDateString","dateTime","timeAndDateFormatter","format","constructor","props","_define_property","languageCode","customTranslations","timeFormatOptions","hour","minute","timeAndDateFormatOptions","AdyenCheckoutError","split","Intl","DateTimeFormat"],"mappings":"ylBAKO,MAAMA,EA4CT,GAAAC,CAAWC,EAAaC,GACpB,MAAMC,EAAcC,EAAeC,KAAKC,aAAcL,EAAKC,GAC3D,OAAoB,OAAhBC,EACOA,EAGJF,CACX,CAQA,MAAAM,CAAcA,EAAgBC,EAAsBN,GAChD,OAAOO,EAAmBF,EAAQF,KAAKK,OAAQF,EAAcN,EACjE,CAOA,IAAAS,CAAYA,EAAcT,EAAsC,IAC5D,QAAaU,IAATD,EAAoB,MAAO,GAC/B,MAAME,EAA0CC,EAAA,CAAEC,KAAM,UAAWC,MAAO,UAAWC,IAAK,WAAcf,GACxG,OAAO,IAAIgB,KAAKP,GAAMQ,mBAAmBd,KAAKK,OAAQG,EAC1D,CAMOO,QAAAA,CAAST,GACZ,YAAaC,IAATD,EAA2B,GACxBN,KAAKgB,qBAAqBC,OAAO,IAAIJ,KAAKP,GACrD,CA9DA,WAAAY,CAAYC,GAlBZC,EAAApB,KAAgBK,iBAChBe,EAAApB,KAAgBqB,uBAEhBD,EAAApB,KAAiBC,uBACjBmB,EAAApB,KAAiBsB,6BAEjBF,EAAApB,KAAgBuB,oBAAgD,CAC5DC,KAAM,UACNC,OAAQ,YAEZL,EAAApB,KAAgB0B,2BAAuDjB,EAAA,CACnEC,KAAM,UACNC,MAAO,UACPC,IAAK,WACFZ,KAAKuB,oBAEZH,EAAApB,KAAgBgB,+BAGZ,MAAMX,OAAEA,EAAMJ,aAAEA,EAAYqB,mBAAEA,GAAuBH,EAErD,IAAKd,EACD,MAAM,IAAIsB,EAAmB,uBAAwB,8CAGzD3B,KAAKK,OAASA,EACdL,KAAKqB,aAAerB,KAAKK,OAAOuB,MAAM,KAAK,GAC3C5B,KAAKsB,mBAAqBA,GAAsB,CAAA,EAEhDtB,KAAKgB,qBAAuBa,KAAKC,eAAe9B,KAAKK,OAAQL,KAAK0B,0BAElE1B,KAAKC,aAAeQ,EAAA,CAAA,EACbR,IACGD,KAAKsB,mBAAmBtB,KAAKK,SAAWL,KAAKsB,mBAAmBtB,KAAKK,QAEnF"}