{"version":3,"file":"Storage.js","sources":["../../../src/utils/Storage.ts"],"sourcesContent":["class NonPersistentStorage {\n    private storage: Record<string, string>;\n\n    constructor() {\n        this.storage = {};\n    }\n\n    public get length(): number {\n        return Object.keys(this.storage).length;\n    }\n\n    public key(index: number): string | null {\n        return Object.keys(this.storage)[index] ?? null;\n    }\n\n    public getItem(keyName: string): string | null {\n        return this.storage[keyName] || null;\n    }\n\n    public setItem(keyName: string, keyValue: string): void {\n        this.storage[keyName] = keyValue;\n    }\n\n    public removeItem(keyName: string): void {\n        delete this.storage[keyName];\n    }\n\n    public clear(): void {\n        this.storage = {};\n    }\n}\n\nclass Storage<T> {\n    private readonly prefix = 'adyen-checkout__';\n    private readonly key: string;\n    private storage: globalThis.Storage | NonPersistentStorage;\n\n    constructor(key: string, storageType: 'sessionStorage' | 'localStorage') {\n        try {\n            this.storage = storageType ? window[storageType] : window.localStorage;\n            if (!this.storage) {\n                throw new Error('storage does not exist');\n            }\n        } catch (e) {\n            this.storage = new NonPersistentStorage();\n        }\n        this.key = this.prefix + key;\n    }\n\n    public get(): T | null {\n        try {\n            const item = this.storage.getItem(this.key);\n            return item ? JSON.parse(item) : null;\n        } catch (err) {\n            return null;\n        }\n    }\n\n    public set(value: T): void {\n        this.storage.setItem(this.key, JSON.stringify(value));\n    }\n\n    public remove(): void {\n        this.storage.removeItem(this.key);\n    }\n\n    public clear(): void {\n        this.storage.clear();\n    }\n\n    public keyByIndex(index: number): string | null {\n        return this.storage.key(index);\n    }\n\n    public get length(): number {\n        return this.storage.length;\n    }\n}\n\nexport default Storage;\n"],"names":["NonPersistentStorage","length","Object","keys","this","storage","key","index","getItem","keyName","setItem","keyValue","removeItem","clear","constructor","_define_property","Storage","get","item","JSON","parse","err","set","value","stringify","remove","keyByIndex","storageType","prefix","window","localStorage","Error","e"],"mappings":"wHAAA,MAAMA,EAOF,UAAWC,GACP,OAAOC,OAAOC,KAAKC,KAAKC,SAASJ,MACrC,CAEOK,GAAAA,CAAIC,GACAL,IAAAA,EAAP,OAAuC,QAAhCA,EAAAA,OAAOC,KAAKC,KAAKC,SAASE,UAA1BL,IAAAA,EAAAA,EAAoC,IAC/C,CAEOM,OAAAA,CAAQC,GACX,OAAOL,KAAKC,QAAQI,IAAY,IACpC,CAEOC,OAAAA,CAAQD,EAAiBE,GAC5BP,KAAKC,QAAQI,GAAWE,CAC5B,CAEOC,UAAAA,CAAWH,UACPL,KAAKC,QAAQI,EACxB,CAEOI,KAAAA,GACHT,KAAKC,QAAU,CAAA,CACnB,CA1BA,WAAAS,GAFAC,EAAAX,KAAQC,kBAGJD,KAAKC,QAAU,CAAA,CACnB,EA2BJ,MAAMW,EAiBKC,GAAAA,GACH,IACI,MAAMC,EAAOd,KAAKC,QAAQG,QAAQJ,KAAKE,KACvC,OAAOY,EAAOC,KAAKC,MAAMF,GAAQ,IACrC,CAAE,MAAOG,GACL,OAAO,IACX,CACJ,CAEOC,GAAAA,CAAIC,GACPnB,KAAKC,QAAQK,QAAQN,KAAKE,IAAKa,KAAKK,UAAUD,GAClD,CAEOE,MAAAA,GACHrB,KAAKC,QAAQO,WAAWR,KAAKE,IACjC,CAEOO,KAAAA,GACHT,KAAKC,QAAQQ,OACjB,CAEOa,UAAAA,CAAWnB,GACd,OAAOH,KAAKC,QAAQC,IAAIC,EAC5B,CAEA,UAAWN,GACP,OAAOG,KAAKC,QAAQJ,MACxB,CAvCA,WAAAa,CAAYR,EAAaqB,GAJzBZ,EAAAX,KAAiBwB,SAAS,oBAC1Bb,EAAAX,KAAiBE,cACjBS,EAAAX,KAAQC,kBAGJ,IAEI,GADAD,KAAKC,QAAUsB,EAAcE,OAAOF,GAAeE,OAAOC,cACrD1B,KAAKC,QACN,MAAM,IAAI0B,MAAM,yBAExB,CAAE,MAAOC,GACL5B,KAAKC,QAAU,IAAIL,CACvB,CACAI,KAAKE,IAAMF,KAAKwB,OAAStB,CAC7B"}