{"version":3,"file":"base64.js","sources":["../../../src/utils/base64.ts"],"sourcesContent":["import { DecodeObject } from '../types/global-types';\n\nexport const NOT_BASE64_ERROR = 'not base64';\nexport const BASE64_MALFORMED_URI_ERROR = 'malformed URI sequence';\n\nconst b64DecodeUnicode = str =>\n    /**\n     * The \"Unicode Problem\" Since DOMStrings are 16-bit-encoded strings:\n     * In most browsers calling window.btoa on a Unicode string will cause\n     * a Character Out Of Range exception if a character exceeds the range\n     * of a 8-bit ASCII-encoded character.\n     * This method solves the problem\n     */\n    decodeURIComponent(Array.prototype.map.call(window.atob(str), c => `%${`00${c.charCodeAt(0).toString(16)}`.slice(-2)}`).join(''));\n\n/**\n * @internal\n */\nconst base64 = {\n    decode: (pData: string): DecodeObject => {\n        if (!base64.isBase64(pData)) {\n            return {\n                success: false,\n                error: NOT_BASE64_ERROR\n            };\n        }\n\n        try {\n            const data = b64DecodeUnicode(pData);\n            return {\n                success: true,\n                data\n            };\n        } catch (e) {\n            return {\n                success: false,\n                error: BASE64_MALFORMED_URI_ERROR\n            };\n        }\n    },\n\n    encode: (pData: string) => window.btoa(pData),\n\n    isBase64: pDataStr => {\n        if (!pDataStr) {\n            return false;\n        }\n\n        if (pDataStr.length % 4) {\n            return false;\n        }\n\n        try {\n            return window.btoa(window.atob(pDataStr)) === pDataStr;\n        } catch (e) {\n            return false;\n        }\n    }\n};\n\nexport default base64;\n"],"names":["NOT_BASE64_ERROR","BASE64_MALFORMED_URI_ERROR","base64","decode","pData","isBase64","success","error","data","str","decodeURIComponent","Array","prototype","map","call","window","atob","c","charCodeAt","toString","slice","join","e","encode","btoa","pDataStr","length"],"mappings":"AAEO,MAAMA,EAAmB,aACnBC,EAA6B,yBAepCC,EAAS,CACXC,OAASC,IACL,IAAKF,EAAOG,SAASD,GACjB,MAAO,CACHE,SAAS,EACTC,MAAOP,GAIf,IAEI,MAAO,CACHM,SAAS,EACTE,MA1BSC,EAuBiBL,EAftCM,mBAAmBC,MAAMC,UAAUC,IAAIC,KAAKC,OAAOC,KAAKP,GAAMQ,GAAK,IAAI,KAAKA,EAAEC,WAAW,GAAGC,SAAS,MAAMC,OAAM,MAAOC,KAAK,MAoBzH,CAAE,MAAOC,GACL,MAAO,CACHhB,SAAS,EACTC,MAAON,EAEf,CAjCiBQ,IAAAA,GAoCrBc,OAASnB,GAAkBW,OAAOS,KAAKpB,GAEvCC,SAAUoB,IACN,IAAKA,EACD,OAAO,EAGX,GAAIA,EAASC,OAAS,EAClB,OAAO,EAGX,IACI,OAAOX,OAAOS,KAAKT,OAAOC,KAAKS,MAAeA,CAClD,CAAE,MAAOH,GACL,OAAO,CACX"}