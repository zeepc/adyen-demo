{"version":3,"file":"amount-util.js","sources":["../../../src/utils/amount-util.ts"],"sourcesContent":["import { PaymentAmount } from '../types';\nimport CURRENCY_DECIMALS from './constants/currency-decimals';\nimport { currencyMinorUnitsConfig } from './constants/currency-minor-units';\n\n/**\n * @internal\n * @param currencyCode -\n * Get divider amount\n */\nexport const getDivider = (currencyCode: string): number => {\n    const divider = CURRENCY_DECIMALS[currencyCode as keyof typeof CURRENCY_DECIMALS];\n    return divider || 100;\n};\n\n/**\n * @internal\n */\nexport const getDecimalAmount = (amount: number | string, currencyCode: string): number => {\n    const divider = getDivider(currencyCode);\n    return parseInt(String(amount), 10) / divider;\n};\n\n/**\n * @internal\n */\nexport const getLocalisedAmount = (amount: number, locale: string, currencyCode: string, options = {}): string => {\n    const stringAmount = amount.toString(); // Changing amount to string to avoid 0-value from returning false\n\n    const decimalAmount = getDecimalAmount(stringAmount, currencyCode);\n    const formattedLocale = locale.replace('_', '-');\n\n    const modifiedOptions = currencyMinorUnitsConfig[currencyCode] ? { ...options, ...currencyMinorUnitsConfig[currencyCode] } : options;\n\n    const localeOptions: Intl.NumberFormatOptions = {\n        style: 'currency',\n        currency: currencyCode,\n        currencyDisplay: 'symbol',\n        ...modifiedOptions\n    };\n\n    try {\n        return decimalAmount.toLocaleString(formattedLocale, localeOptions);\n    } catch (e) {\n        return stringAmount;\n    }\n};\n\n/**\n * Validates a payment amount object.\n *\n * @param amount - The payment amount object to validate\n * @returns True if the amount has a valid numeric value, non-empty currency string,\n *          and optionally a valid currencyDisplay string\n */\nexport const isAmountValid = (amount: PaymentAmount): boolean => {\n    if (!amount || typeof amount !== 'object') {\n        return false;\n    }\n\n    const hasValidValue = typeof amount.value === 'number' && !Number.isNaN(amount.value);\n    const hasValidCurrency = typeof amount.currency === 'string' && amount.currency.length > 0;\n    const hasValidCurrencyDisplay = amount.currencyDisplay === undefined || typeof amount.currencyDisplay === 'string';\n\n    return hasValidValue && hasValidCurrency && hasValidCurrencyDisplay;\n};\n"],"names":["getDivider","currencyCode","CURRENCY_DECIMALS","getDecimalAmount","amount","divider","parseInt","String","getLocalisedAmount","locale","options","stringAmount","toString","decimalAmount","formattedLocale","replace","modifiedOptions","currencyMinorUnitsConfig","_object_spread","localeOptions","style","currency","currencyDisplay","toLocaleString","e","isAmountValid","hasValidValue","value","Number","isNaN","hasValidCurrency","length","hasValidCurrencyDisplay","undefined"],"mappings":"2jBASO,MAAMA,EAAcC,GACPC,EAAkBD,IAChB,IAMTE,EAAmB,CAACC,EAAyBH,KACtD,MAAMI,EAAUL,EAAWC,GAC3B,OAAOK,SAASC,OAAOH,GAAS,IAAMC,GAM7BG,EAAqB,CAACJ,EAAgBK,EAAgBR,EAAsBS,EAAU,MAC/F,MAAMC,EAAeP,EAAOQ,WAEtBC,EAAgBV,EAAiBQ,EAAcV,GAC/Ca,EAAkBL,EAAOM,QAAQ,IAAK,KAEtCC,EAAkBC,EAAyBhB,GAAgBiB,KAAKR,EAAYO,EAAyBhB,IAAkBS,EAEvHS,EAA0CD,EAAA,CAC5CE,MAAO,WACPC,SAAUpB,EACVqB,gBAAiB,UACdN,GAGP,IACI,OAAOH,EAAcU,eAAeT,EAAiBK,EACzD,CAAE,MAAOK,GACL,OAAOb,CACX,GAUSc,EAAiBrB,IAC1B,IAAKA,GAA4B,iBAAXA,EAClB,OAAO,EAGX,MAAMsB,EAAwC,iBAAjBtB,EAAOuB,QAAuBC,OAAOC,MAAMzB,EAAOuB,OACzEG,EAA8C,iBAApB1B,EAAOiB,UAAyBjB,EAAOiB,SAASU,OAAS,EACnFC,OAAqDC,IAA3B7B,EAAOkB,iBAAmE,iBAA3BlB,EAAOkB,gBAEtF,OAAOI,GAAiBI,GAAoBE"}