{"version":3,"file":"Iris.js","sources":["../../../../src/components/Iris/Iris.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { ICore } from '../../types';\nimport isMobile from '../../utils/isMobile';\nimport IssuerListContainer from '../helpers/IssuerListContainer/IssuerListContainer';\nimport { QRLoader } from '../internal/QRLoader';\nimport { TxVariants } from '../tx-variants';\nimport IrisComponent from './components/IrisComponent';\nimport { IrisQrCodeInstructions } from './components/IrisQrCodeInstructions';\nimport { IrisConfiguration, IrisData, IrisMode } from './types';\nimport { DEFAULT_IRIS_COUNTDOWN_TIME } from './constants';\n\nexport class Iris extends IssuerListContainer<IrisConfiguration, IrisData> {\n    public static readonly type = TxVariants.iris;\n\n    private mode: IrisMode;\n\n    constructor(checkout: ICore, props: IrisConfiguration) {\n        super(checkout, props);\n        this.mode = isMobile() ? IrisMode.BANK_LIST : IrisMode.QR_CODE;\n    }\n\n    private readonly onUpdateMode = (mode: IrisMode): void => {\n        this.mode = mode;\n    };\n\n    private renderIssuerList(): h.JSX.Element {\n        return super.componentToRender();\n    }\n\n    formatData(): IrisData {\n        if (this.mode === IrisMode.BANK_LIST) {\n            return {\n                paymentMethod: {\n                    type: this.type,\n                    issuer: this.state?.data?.issuer\n                }\n            };\n        }\n\n        return {\n            paymentMethod: {\n                type: this.type\n            }\n        };\n    }\n\n    formatProps(props: IrisConfiguration): IrisConfiguration {\n        return {\n            ...super.formatProps(props),\n            countdownTime: props.countdownTime ?? DEFAULT_IRIS_COUNTDOWN_TIME\n        };\n    }\n\n    get isValid() {\n        if (this.mode === IrisMode.BANK_LIST) {\n            return super.isValid;\n        }\n\n        return true;\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        if (this.props.type === 'qrCode') {\n            return (\n                <QRLoader\n                    type={TxVariants.iris}\n                    brandLogo={this.icon}\n                    clientKey={this.props.clientKey}\n                    qrCodeData={this.props.qrCodeData ? encodeURIComponent(this.props.qrCodeData) : null}\n                    countdownTime={this.props.countdownTime}\n                    paymentData={this.props.paymentData}\n                    delay={this.props.delay}\n                    onActionHandled={this.onActionHandled}\n                    onError={this.props.onError}\n                    onComplete={this.onComplete}\n                    introduction={IrisQrCodeInstructions}\n                    showAmount\n                    copyBtn={false}\n                />\n            );\n        }\n\n        return (\n            <IrisComponent\n                setComponentRef={this.setComponentRef}\n                defaultMode={this.mode}\n                onUpdateMode={this.onUpdateMode}\n                issuerListUI={this.renderIssuerList()}\n                showPayButton={this.props.showPayButton}\n                payButton={this.payButton}\n                issuers={this.props.issuers}\n            />\n        );\n    }\n}\n\nexport default Iris;\n"],"names":["Iris","IssuerListContainer","renderIssuerList","super","componentToRender","formatData","_this_state_data","_this_state","this","mode","IrisMode","BANK_LIST","paymentMethod","type","issuer","state","data","formatProps","props","_object_spread_props","_object_spread","countdownTime","DEFAULT_IRIS_COUNTDOWN_TIME","isValid","h","QRLoader","TxVariants","iris","brandLogo","icon","clientKey","qrCodeData","encodeURIComponent","paymentData","delay","onActionHandled","onError","onComplete","introduction","IrisQrCodeInstructions","showAmount","copyBtn","IrisComponent","setComponentRef","defaultMode","onUpdateMode","issuerListUI","showPayButton","payButton","issuers","constructor","checkout","_define_property","isMobile","QR_CODE"],"mappings":"uvCAWO,MAAMA,UAAaC,EAcdC,gBAAAA,GACJ,OAAOC,MAAMC,mBACjB,CAEAC,UAAAA,OAKwBC,EAAAC,EAJpB,OAAIC,KAAKC,OAASC,EAASC,UAChB,CACHC,cAAe,CACXC,KAAML,KAAKK,KACXC,OAAkB,QAAVP,EAAAC,KAAKO,iBAALR,GAAgB,QAAhBD,EAAAC,EAAYS,YAAZ,IAAAV,OAAA,EAAAA,EAAkBQ,SAK/B,CACHF,cAAe,CACXC,KAAML,KAAKK,MAGvB,CAEAI,WAAAA,CAAYC,GAGWA,IAAAA,EAFnB,OAAOC,oUAAAC,CAAA,CAAA,EACAjB,MAAMc,YAAYC,IAAAA,CACrBG,cAAkC,QAAnBH,EAAAA,EAAMG,yBAANH,EAAAA,EAAuBI,GAE9C,CAEA,WAAIC,GACA,OAAIf,KAAKC,OAASC,EAASC,WAChBR,MAAMoB,OAIrB,CAEmBnB,iBAAAA,GACf,MAAwB,WAApBI,KAAKU,MAAML,KAEPW,EAACC,EAAAA,CACGZ,KAAMa,EAAWC,KACjBC,UAAWpB,KAAKqB,KAChBC,UAAWtB,KAAKU,MAAMY,UACtBC,WAAYvB,KAAKU,MAAMa,WAAaC,mBAAmBxB,KAAKU,MAAMa,YAAc,KAChFV,cAAeb,KAAKU,MAAMG,cAC1BY,YAAazB,KAAKU,MAAMe,YACxBC,MAAO1B,KAAKU,MAAMgB,MAClBC,gBAAiB3B,KAAK2B,gBACtBC,QAAS5B,KAAKU,MAAMkB,QACpBC,WAAY7B,KAAK6B,WACjBC,aAAcC,EACdC,YAAAA,EACAC,SAAS,IAMjBjB,EAACkB,EAAAA,CACGC,gBAAiBnC,KAAKmC,gBACtBC,YAAapC,KAAKC,KAClBoC,aAAcrC,KAAKqC,aACnBC,aAActC,KAAKN,mBACnB6C,cAAevC,KAAKU,MAAM6B,cAC1BC,UAAWxC,KAAKwC,UAChBC,QAASzC,KAAKU,MAAM+B,SAGhC,CA7EA,WAAAC,CAAYC,EAAiBjC,GACzBf,MAAMgD,EAAUjC,GAHpBkC,EAAA5C,KAAQC,YAAR,GAOA2C,EAAA5C,KAAiBqC,eAAgBpC,IAC7BD,KAAKC,KAAOA,IAJZD,KAAKC,KAAO4C,IAAa3C,EAASC,UAAYD,EAAS4C,OAC3D,EAPAF,EADSpD,EACca,OAAOa,EAAWC"}