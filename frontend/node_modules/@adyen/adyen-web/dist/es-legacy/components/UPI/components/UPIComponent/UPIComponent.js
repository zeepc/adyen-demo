import{createElement as e,Fragment as t}from"../../../../external/preact/dist/preact.js";import{useState as r,useCallback as o,useEffect as n}from"../../../../external/preact/hooks/dist/hooks.js";import a from"../../../../core/Context/useImage.js";import{UPI_MODE as i,A11Y as s}from"../../constants.js";import"../../../../_virtual/index.js";import{SegmentedControlRegion as l}from"../../../internal/SegmentedControl/SegmentedControlRegion.js";import c from"../UPIIntentAppList/UPIIntentAppList.js";import{useCoreContext as u}from"../../../../core/Context/CoreProvider.js";import d from"../../../internal/Alert/Alert.js";import p from"../UPIMandate/UPIMandate.js";import{useAmount as m}from"../../../../core/Context/AmountProvider.js";function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},o=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),o.forEach(function(t){f(e,t,r[t])})}return e}function g({mode:f,onChange:g,payButton:y,showPayButton:j,mandate:I,apps:h=[]}){const{i18n:C}=u(),N=a(),[O,P]=r("ready"),[v,A]=r(null),{amount:E}=m(),[k,S]=r(f===i.QR_CODE),T=I&&e(p,{mandate:I,amount:E});this.setStatus=e=>{P(e)},this.showValidation=()=>{f===i.INTENT&&R()};const x=o(e=>{(null==e?void 0:e.id)!==(null==v?void 0:v.id)&&(A(e),S(!0),P("ready"))},[v]),R=o(()=>{v?(P("ready"),S(!0)):(P("error"),S(!1))},[v]);return n(()=>{f!==i.QR_CODE?g({data:b({},v&&{app:v}),isValid:k}):g({data:{},valid:{},errors:{},isValid:!0})},[v,k,f,g]),e(t,null,f===i.INTENT&&e(l,{id:s.AreaId.INTENT,ariaLabelledBy:s.ButtonId.INTENT,className:"adyen-checkout-upi-area-intent"},e("span",{className:"adyen-checkout-upi-instruction-label"},C.get("upi.intent.instruction")),"error"===O&&e(d,{icon:"cross"},C.get("upi.error.noAppSelected")),e(c,{disabled:"loading"===O,apps:h,selectedAppId:null==v?void 0:v.id,onAppSelect:x}),T,j&&y({label:C.get("continue"),status:O})),f===i.QR_CODE&&e(l,{id:s.AreaId.QR,ariaLabelledBy:s.ButtonId.QR,className:"adyen-checkout-upi-area-qr-code"},e("span",{className:"adyen-checkout-upi-instruction-label"},C.get("upi.qrCode.instruction")),T,j&&y({label:C.get("generateQRCode"),icon:N({imageFolder:"components/"})("qr"),status:O})))}export{g as default};
//# sourceMappingURL=UPIComponent.js.map
