{"version":3,"file":"UPIMandate.js","sources":["../../../../../../src/components/UPI/components/UPIMandate/UPIMandate.tsx"],"sourcesContent":["import { h } from 'preact';\nimport { useMemo } from 'preact/hooks';\nimport { useCoreContext } from '../../../../core/Context/CoreProvider';\nimport Alert from '../../../internal/Alert';\nimport type { PaymentAmount } from '../../../../types/global-types';\n\nexport type Mandate = { amount: string; frequency: 'monthly' | 'weekly' | 'adhoc'; amountRule: 'max' | 'exact' };\n\nexport interface UPIMandateProps {\n    mandate: Mandate;\n    amount?: PaymentAmount;\n}\n\nconst UPIMandate = ({ mandate, amount }: UPIMandateProps): h.JSX.Element => {\n    const { i18n } = useCoreContext();\n\n    const mandateContent = useMemo((): h.JSX.Element => {\n        const { amount: mandateAmount, frequency, amountRule } = mandate;\n        const { value: paymentAmount, currency } = amount || {};\n\n        if (!frequency || !amountRule || !mandateAmount || !currency) {\n            console.warn('No mandate information because of missing one of the following: frequency, amountRule, amount or currency');\n            return null;\n        }\n\n        const formattedMandateAmount = i18n.amount(Number(mandateAmount), currency);\n        const formattedTransactionAmount = paymentAmount ? i18n.amount(paymentAmount, currency) : null;\n\n        const frequencyText = i18n.get(`upi.mandate.frequency.${frequency}`);\n        const introText = i18n.get('upi.mandate.intro');\n        const recurringAmount = `${formattedMandateAmount}${frequencyText}`;\n\n        if (amountRule === 'exact') {\n            return (\n                <span>\n                    {introText} (<strong>{recurringAmount}</strong>).\n                </span>\n            );\n        }\n\n        // amountRule === 'max'\n        const maxAmountText = i18n.get('upi.mandate.upTo', { values: { amount: recurringAmount } });\n\n        if (formattedTransactionAmount) {\n            const extraText = i18n.get('upi.mandate.max.extraText');\n            return (\n                <span>\n                    {introText} (<strong>{formattedTransactionAmount}</strong>). {extraText} (<strong>{maxAmountText}</strong>).\n                </span>\n            );\n        }\n\n        return (\n            <span>\n                {introText} (<strong>{maxAmountText}</strong>).\n            </span>\n        );\n    }, [mandate, amount, i18n]);\n\n    if (!mandateContent) return null;\n\n    return (\n        <Alert icon=\"info_black\" type=\"info\">\n            {mandateContent}\n        </Alert>\n    );\n};\n\nexport default UPIMandate;\n"],"names":["UPIMandate","mandate","amount","i18n","useCoreContext","mandateContent","useMemo","mandateAmount","frequency","amountRule","value","paymentAmount","currency","console","warn","formattedMandateAmount","Number","formattedTransactionAmount","frequencyText","get","introText","recurringAmount","h","span","strong","maxAmountText","values","extraText","Alert","icon","type"],"mappings":"+QAaA,MAAMA,EAAa,EAAGC,UAASC,aAC3B,MAAMC,KAAEA,GAASC,IAEXC,EAAiBC,EAAQ,KAC3B,MAAQJ,OAAQK,EAAaC,UAAEA,EAASC,WAAEA,GAAeR,GACjDS,MAAOC,EAAaC,SAAEA,GAAaV,GAAU,CAAA,EAErD,KAAKM,GAAcC,GAAeF,GAAkBK,GAEhD,OADAC,QAAQC,KAAK,6GACN,KAGX,MAAMC,EAAyBZ,EAAKD,OAAOc,OAAOT,GAAgBK,GAC5DK,EAA6BN,EAAgBR,EAAKD,OAAOS,EAAeC,GAAY,KAEpFM,EAAgBf,EAAKgB,IAAI,yBAAyBX,KAClDY,EAAYjB,EAAKgB,IAAI,qBACrBE,EAAkB,GAAGN,IAAyBG,IAEpD,GAAmB,UAAfT,EACA,OACIa,EAACC,OAAAA,KACIH,EAAU,KAAEE,EAACE,cAAQH,GAAyB,MAM3D,MAAMI,EAAgBtB,EAAKgB,IAAI,mBAAoB,CAAEO,OAAQ,CAAExB,OAAQmB,KAEvE,GAAIJ,EAA4B,CAC5B,MAAMU,EAAYxB,EAAKgB,IAAI,6BAC3B,OACIG,EAACC,OAAAA,KACIH,EAAU,KAAEE,EAACE,SAAAA,KAAQP,GAAoC,MAAIU,EAAU,KAAEL,EAACE,SAAAA,KAAQC,GAAuB,KAGtH,CAEA,OACIH,EAACC,OAAAA,KACIH,EAAU,KAAEE,EAACE,cAAQC,GAAuB,OAGtD,CAACxB,EAASC,EAAQC,IAErB,OAAKE,EAGDiB,EAACM,EAAAA,CAAMC,KAAK,aAAaC,KAAK,QACzBzB,GAJmB"}