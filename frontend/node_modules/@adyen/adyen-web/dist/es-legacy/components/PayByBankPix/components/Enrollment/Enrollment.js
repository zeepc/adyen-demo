import{createElement as t}from"../../../../external/preact/dist/preact.js";import{useRef as e,useState as n,useEffect as a}from"../../../../external/preact/hooks/dist/hooks.js";import{useCoreContext as o}from"../../../../core/Context/CoreProvider.js";import i from"../../../internal/IssuerList/IssuerList.js";import{useIssuerWithLogo as r}from"./useIssuerWithLogo.js";import s from"./getEnrollmentStatus.js";import l from"./components/IssuerListIntroduction.js";import m from"./components/PayByBankPixAwait.js";import p from"../../../../core/Context/useImage.js";import{LabelOnlyDisclaimerMessage as c}from"../../../internal/DisclaimerMessage/DisclaimerMessage.js";import{TxVariants as u}from"../../../tx-variants.js";function y(y){const{i18n:d,loadingContext:b}=o(),g=p(),w=e(null),[x,f]=n(null),k=[{name:"open-finance",alt:d.get("paybybankpix.await.logoAlt.openFinance"),src:`${g({parentFolder:`${y.txVariant}/`})("open-finance")}`},{name:"arrow-down",alt:d.get("paybybankpix.await.logoAlt.arrowDown"),src:`${g({imageFolder:"components/"})("arrow_down")}`},{name:"bank",alt:d.get("paybybankpix.await.logoAlt.bank"),src:`${g({imageFolder:"components/"})("bank")}`}],h=e({showValidation:()=>{var t;null==w||null===(t=w.current)||void 0===t||t.showValidation()},setStatus:t=>{var e;null==w||null===(e=w.current)||void 0===e||e.setStatus(t)}});return a(()=>{y.setComponentRef(h.current)},[y.setComponentRef]),a(()=>{x&&y.onEnroll(x)},[x]),t("div",{className:"adyen-checkout-pix-enrollment"},(t=>"await"===t.type)(y)?t(m,{logos:k,type:y.txVariant,countdownTime:y.countdownTime,clientKey:y.clientKey,onError:y.onError,awaitText:d.get("paybybankpix.await.waitForConfirmation"),instructions:d.get("paybybankpix.await.timeToPay",{values:{numberOfMin:y.countdownTime}}),pollStatus:async()=>{if(x)return;const{enrollmentId:t,clientKey:e}=y,n=await s({enrollmentId:t,clientKey:e,loadingContext:b});return n.registrationOptions&&f(n.registrationOptions),n},endSlot:()=>t("span",null,d.get("paybybankpix.await.withOpenFinance"))}):t("div",{className:"adyen-checkout-pix-enrollment-issuer-list"},t(l,{txVariant:y.txVariant}),t(i,{items:r({issuers:y.issuers,txVariant:y.txVariant}),selectFieldLabel:d.get("paybybankpix.issuerList.selectField.label"),onSubmitAnalytics:y.onSubmitAnalytics,onChange:y.onChange,payButton:y.payButton,showPayButton:!0,ref:w,type:u.paybybank_pix}),t("span",{className:"adyen-checkout-disclaimer__label"},t(c,{message:d.get("paybybankpix.issuerList.disclaimer"),urls:["https://www.adyen.com/pt_BR/legal/termo-de-consentimento-br"]}))))}export{y as default};
//# sourceMappingURL=Enrollment.js.map
