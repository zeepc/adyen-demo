import{createElement as e}from"../../../external/preact/dist/preact.js";import{useRef as r,useEffect as t}from"../../../external/preact/hooks/dist/hooks.js";import i from"../FormFields/Fieldset/Fieldset.js";import n from"../FormFields/Field/Field.js";import a from"./ReadOnlyCompanyDetails.js";import{companyDetailsValidationRules as o}from"./validate.js";import{useCoreContext as s}from"../../../core/Context/CoreProvider.js";import{getFormattedData as l}from"./utils.js";import m from"../../../utils/useForm/useForm.js";import c from"../FormFields/InputText.js";function u(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},i=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.forEach(function(r){u(e,r,t[r])})}return e}function d(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r}(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}const f=["name","registrationNumber"];function b(u){const{label:f="",namePrefix:b,requiredFields:g,visibility:y}=u,{i18n:j}=s(),{handleChangeFor:O,triggerValidation:v,data:h,valid:F,errors:N,isValid:P}=m({schema:g,rules:p({},o,u.validationRules),defaultData:u.data}),w=r({});var D;Object.keys(w.current).length||(null===(D=u.setComponentRef)||void 0===D||D.call(u,w.current));w.current.showValidation=()=>{v()};const k=e=>`${b?`${b}.`:""}${e}`,C=e=>r=>{const{name:t}=r.target,i=t.split(`${b}.`).pop();O(i,e)(r)},M=e=>r=>{const{name:t}=r.target,i=t.split(`${b}.`).pop();O(i,e)(r)};return t(()=>{const e=l(h);u.onChange({data:e,valid:F,errors:N,isValid:P})},[h,F,N,P]),"hidden"===y?null:"readOnly"===y?e(a,d(p({},u),{data:h})):e(i,{classNameModifiers:[f],label:f},g.includes("name")&&e(n,{label:j.get("companyDetails.name"),classNameModifiers:["name"],errorMessage:!!N.name,i18n:j,name:k("companyName")},e(c,{name:k("name"),value:h.name,classNameModifiers:["name"],onInput:M("input"),onBlur:C("blur"),spellcheck:!1})),g.includes("registrationNumber")&&e(n,{label:j.get("companyDetails.registrationNumber"),classNameModifiers:["registrationNumber"],errorMessage:!!N.registrationNumber,i18n:j,name:k("registrationNumber")},e(c,{name:k("registrationNumber"),value:h.registrationNumber,classNameModifiers:["registrationNumber"],onInput:M("input"),onBlur:C("blur"),spellcheck:!1})))}b.defaultProps={data:{},onChange:()=>{},visibility:"editable",requiredFields:f,validationRules:o};export{f as COMPANY_DETAILS_SCHEMA,b as default};
//# sourceMappingURL=CompanyDetails.js.map
