{"version":3,"file":"RedirectButton.js","sources":["../../../../../src/components/internal/RedirectButton/RedirectButton.tsx"],"sourcesContent":["import { h, Fragment } from 'preact';\nimport { useCoreContext } from '../../../core/Context/CoreProvider';\nimport { useState } from 'preact/hooks';\nimport { useAmount } from '../../../core/Context/AmountProvider';\n\n// TODO this should ideally be remove but we need let prop propagate down\n//  probably not worth changing this behaviour now\nexport interface RedirectButtonProps {\n    label?: string;\n    icon?: string;\n    payButton: Function;\n    onSubmit: Function;\n    name: string;\n    showPayButton: boolean;\n    ref?: any;\n}\n\nfunction RedirectButton({ label = null, icon = null, payButton, onSubmit, name, showPayButton, ...props }: RedirectButtonProps) {\n    const { i18n } = useCoreContext();\n    const [status, setStatus] = useState('ready');\n    const { amount } = useAmount();\n\n    this.setStatus = newStatus => {\n        setStatus(newStatus);\n    };\n\n    const payButtonLabel = () => {\n        const isZeroAuth = amount && {}.hasOwnProperty.call(amount, 'value') && amount.value === 0;\n        if (isZeroAuth) return `${i18n.get('preauthorizeWith')} ${name}`;\n        return `${i18n.get('continueTo')} ${name}`;\n    };\n\n    if (!showPayButton) {\n        return;\n    }\n\n    return (\n        <Fragment>\n            {payButton({\n                ...props,\n                status,\n                icon,\n                classNameModifiers: ['standalone'],\n                label: label || payButtonLabel(),\n                onClick: onSubmit\n            })}\n        </Fragment>\n    );\n}\n\nexport default RedirectButton;\n"],"names":["RedirectButton","_0","label","icon","payButton","onSubmit","name","showPayButton","props","i18n","useCoreContext","status","setStatus","useState","amount","useAmount","this","newStatus","h","Fragment","_object_spread_props","_object_spread","classNameModifiers","hasOwnProperty","call","value","get","onClick"],"mappings":"+3CAiBA,SAASA,EAAeC,GAAA,IAAAC,MAAEA,EAAQ,KAAIC,KAAEA,EAAO,KAAIC,UAAEA,EAASC,SAAEA,EAAQC,KAAEA,EAAIC,cAAEA,GAA8CN,EAA5BO,EAAAA,EAAAA,EAAAA,gEAC9F,MAAMC,KAAEA,GAASC,KACVC,EAAQC,GAAaC,EAAS,UAC/BC,OAAEA,GAAWC,IAEnBC,KAAKJ,UAAYK,IACbL,EAAUK,IASd,GAAKV,EAIL,OACIW,EAACC,EAAAA,KACIf,EAAUgB,oUAAAC,CAAA,GACJb,GAAAA,CACHG,SACAR,OACAmB,mBAAoB,CAAC,cACrBpB,MAAOA,IAhBIY,GAAU,CAAC,EAAES,eAAeC,KAAKV,EAAQ,UAA6B,IAAjBA,EAAOW,MACxD,GAAGhB,EAAKiB,IAAI,uBAAuBpB,IACnD,GAAGG,EAAKiB,IAAI,iBAAiBpB,KAe5BqB,QAAStB,KAIzB"}