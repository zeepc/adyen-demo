import{createElement as t,Fragment as e}from"../../../../../external/preact/dist/preact.js";import{useState as o,useCallback as n}from"../../../../../external/preact/hooks/dist/hooks.js";import s from"../../../Button/Button.js";import r from"../../context/useClickToPayContext.js";import a from"./CtPOneTimePasswordInput/CtPOneTimePasswordInput.js";import{CtPInfo as i}from"../CtPInfo/CtPInfo.js";import l from"../CtPSection/CtPSection.js";import{useCoreContext as p}from"../../../../../core/Context/CoreProvider.js";import d from"./CtPSaveCookiesCheckbox/CtPSaveCookiesCheckbox.js";import{isSrciError as u}from"../../services/utils.js";const m=({onDisplayCardComponent:m})=>{const{i18n:c}=p(),{finishIdentityValidation:C,otpMaskedContact:f,otpNetwork:P,isCtpPrimaryPaymentMethod:h}=r(),[k,y]=o(null),[g,j]=o(!1),[v,x]=o(!1),[I,b]=o(null),[S,T]=o(null),[w,E]=o(!1),B=n(t=>{T(t)},[]),O=n(({data:t,isValid:e})=>{y(t.otp),j(e)},[]),A=n(()=>{b(null)},[]),M=n(async()=>{if(b(null),g){x(!0);try{await C(k)}catch(t){if(!u(t))return void x(!1);b(null==t?void 0:t.reason),x(!1),"ACCT_INACCESSIBLE"===(null==t?void 0:t.reason)&&(E(!0),null==m||m())}}else S.validateInput()},[k,g,S,m]),N=n(t=>{"Enter"===t.key&&M()},[M]),V=c.get("ctp.otp.subtitle").split("%@");return t(e,null,t(l.Title,{endAdornment:t(i,null)},c.get("ctp.otp.title")),t(l.Text,null,V[0]," ",P," ",V[1],t("span",{className:"adyen-checkout-ctp__otp-subtitle--highlighted"},f),V[2]),t(a,{hideResendOtpButton:w,onChange:O,onSetInputHandlers:B,disabled:v,errorMessage:I&&c.get(`ctp.errors.${I}`),onPressEnter:M,onResendCode:A,isValidatingOtp:v}),t(d,null),t(s,{disabled:w,label:c.get("continue"),variant:h?"primary":"secondary",onClick:M,status:v&&"loading",onKeyDown:N}))};export{m as default};
//# sourceMappingURL=CtPOneTimePassword.js.map
