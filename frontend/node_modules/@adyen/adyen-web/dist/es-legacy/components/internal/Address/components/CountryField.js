import{createElement as e}from"../../../../external/preact/dist/preact.js";import{useState as r,useLayoutEffect as t}from"../../../../external/preact/hooks/dist/hooks.js";import o from"../../FormFields/Field/Field.js";import{useCoreContext as n}from"../../../../core/Context/CoreProvider.js";import c from"../../../../core/Services/get-dataset.js";import s from"../../FormFields/Select/Select.js";function a(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function i(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r}(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}const l=(e,r)=>{const t=e=>i(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},o=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.forEach(function(r){a(e,r,t[r])})}return e}({},e),{name:e.name,selectedOptionName:e.name});return r.length?e.filter(e=>r.includes(e.id)).map(t):e.map(t)};function u(a){const{allowedCountries:i=[],classNameModifiers:u=[],errorMessage:p,onDropdownChange:m,value:f,required:d}=a,{i18n:y,loadingContext:O}=n(),[b,j]=r([]),[g,h]=r(!1),[w,P]=r(a.readOnly);return t(()=>{c("countries",O,y.locale).then(e=>{const r=l(e,i);j(r||[]),P(1===r.length||w),h(!0)}).catch(e=>{console.error(e),j([]),h(!0)})},[]),g?e(o,{name:"country",label:y.get("country"),errorMessage:p,classNameModifiers:u,isValid:!!f,showValidIcon:!1,i18n:y,readOnly:w&&!!f},e(s,{onChange:m,name:"country",selectedValue:f,items:b,readonly:w&&!!f,required:d})):null}export{u as default};
//# sourceMappingURL=CountryField.js.map
