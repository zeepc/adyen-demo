{"version":3,"file":"UIElement.js","sources":["../../../../../src/components/internal/UIElement/UIElement.tsx"],"sourcesContent":["import { createRef, h, RefObject } from 'preact';\nimport { Resources } from '../../../core/Context/Resources';\nimport AdyenCheckoutError, { NETWORK_ERROR } from '../../../core/Errors/AdyenCheckoutError';\nimport { hasOwnProperty } from '../../../utils/hasOwnProperty';\nimport BaseElement from '../BaseElement/BaseElement';\nimport PayButton from '../PayButton';\nimport { assertIsDropin, cleanupFinalResult, getRegulatoryDefaults, sanitizeResponse, verifyPaymentDidNotFail } from './utils';\n\nimport { AbstractAnalyticsEvent } from '../../../core/Analytics/events/AbstractAnalyticsEvent';\nimport { AnalyticsErrorEvent, ErrorEventType } from '../../../core/Analytics/events/AnalyticsErrorEvent';\nimport { AnalyticsInfoEvent, InfoEventType } from '../../../core/Analytics/events/AnalyticsInfoEvent';\nimport { AnalyticsLogEvent, LogEventType } from '../../../core/Analytics/events/AnalyticsLogEvent';\nimport type { CheckoutSessionDetailsResponse, CheckoutSessionPaymentResponse } from '../../../core/CheckoutSession/types';\nimport type { NewableComponent } from '../../../core/core.registry';\nimport CancelError from '../../../core/Errors/CancelError';\nimport type { AdditionalDetailsData, CoreConfiguration, ICore } from '../../../core/types';\nimport type {\n    ActionHandledReturnObject,\n    CheckoutAdvancedFlowResponse,\n    Order,\n    PaymentAction,\n    PaymentAmount,\n    PaymentData,\n    PaymentMethodsResponse,\n    PaymentResponseData,\n    RawPaymentMethod\n} from '../../../types/global-types';\nimport type { IDropin } from '../../Dropin/types';\nimport type { ComponentMethodsRef, UIElementProps, UIElementStatus } from './types';\nimport type { IAnalytics } from '../../../core/Analytics/Analytics';\n\nimport { CoreProvider } from '../../../core/Context/CoreProvider';\nimport { SRPanel } from '../../../core/Errors/SRPanel';\nimport './UIElement.scss';\nimport SRPanelProvider from '../../../core/Errors/SRPanelProvider';\nimport { AmountProvider, AmountProviderRef } from '../../../core/Context/AmountProvider';\nimport { PayButtonProps } from '../PayButton/PayButton';\n\nexport abstract class UIElement<P extends UIElementProps = UIElementProps> extends BaseElement<P> {\n    protected componentRef: any;\n\n    protected resources: Resources;\n\n    public elementRef: UIElement;\n\n    public static type = undefined;\n\n    /**\n     * Reference to the methods exposed by the AmountProvider context\n     */\n    protected amountProviderRef: RefObject<AmountProviderRef> = createRef();\n\n    /**\n     * Defines all txVariants that the Component supports (in case it support multiple ones besides the 'type' one)\n     */\n    public static txVariants: string[] = [];\n\n    constructor(checkout: ICore, props?: P) {\n        super(checkout, props);\n\n        this.core.register(this.constructor as NewableComponent);\n\n        this.submit = this.submit.bind(this);\n        this.setState = this.setState.bind(this);\n        this.onComplete = this.onComplete.bind(this);\n        this.handleAction = this.handleAction.bind(this);\n        this.handleOrder = this.handleOrder.bind(this);\n        this.handleAdditionalDetails = this.handleAdditionalDetails.bind(this);\n        this.handleResponse = this.handleResponse.bind(this);\n        this.setElementStatus = this.setElementStatus.bind(this);\n        this.submitAnalytics = this.submitAnalytics.bind(this);\n        this.makePaymentsCall = this.makePaymentsCall.bind(this);\n        this.makeAdditionalDetailsCall = this.makeAdditionalDetailsCall.bind(this);\n        this.submitUsingSessionsFlow = this.submitUsingSessionsFlow.bind(this);\n        this.updateAmount = this.updateAmount.bind(this);\n\n        this.elementRef = (props && props.elementRef) || this;\n        this.resources = this.props.modules ? this.props.modules.resources : undefined;\n\n        this.storeElementRefOnCore(this.props);\n\n        this.onEnterKeyPressed = this.onEnterKeyPressed.bind(this);\n        this.onActionHandled = this.onActionHandled.bind(this);\n\n        this.createBeforeRenderHook(props);\n        this.reportIntegrationFlavor();\n    }\n\n    /**\n     * Creates a hook tied to render() method. This hook is called every time render() is invoked.\n     * Currently useful for Analytics\n     *\n     * @param configSetByMerchant\n     * @private\n     */\n    private createBeforeRenderHook(configSetByMerchant: P): void {\n        const originalRender = this.render;\n\n        this.render = (...args: any[]) => {\n            this.beforeRender(configSetByMerchant);\n            return originalRender.apply(this, args);\n        };\n    }\n\n    protected beforeRender(configSetByMerchant?: P): void {\n        // We don't send 'rendered' events when rendering actions\n        if (configSetByMerchant?.originalAction) {\n            return;\n        }\n\n        const event = new AnalyticsInfoEvent({\n            type: InfoEventType.rendered,\n            component: this.type,\n            configData: { ...configSetByMerchant, showPayButton: this.props.showPayButton },\n            ...(configSetByMerchant?.oneClick && { isStoredPaymentMethod: true })\n        });\n\n        this.analytics.sendAnalytics(event);\n    }\n\n    protected reportIntegrationFlavor(): void {\n        void this.analytics.sendFlavor('components');\n    }\n\n    get analytics(): IAnalytics {\n        return this.core.modules.analytics;\n    }\n\n    get srPanel(): SRPanel {\n        return this.core.modules.srPanel;\n    }\n\n    private getPaymentMethodConfigFromResponse(componentProps: P) {\n        if (componentProps?.storedPaymentMethodId) return this.getStoredPaymentMethodDetails(componentProps.storedPaymentMethodId);\n        return this.getPaymentMethodFromPaymentMethodsResponse(componentProps?.type, componentProps?.paymentMethodId);\n    }\n\n    protected override buildElementProps(componentProps?: P) {\n        const globalCoreProps = this.core.getCorePropsForComponent();\n\n        const paymentMethodFromResponse = this.getPaymentMethodConfigFromResponse(componentProps);\n\n        const finalProps = {\n            showPayButton: true,\n            ...globalCoreProps,\n            ...paymentMethodFromResponse,\n            ...componentProps\n        };\n\n        const isDropinInstance = assertIsDropin(this as unknown as IDropin);\n\n        this.props = this.formatProps({\n            ...this.constructor['defaultProps'], // component defaults\n            ...getRegulatoryDefaults(this.core.options.countryCode, isDropinInstance), // regulatory defaults\n            ...finalProps // the rest (inc. merchant defined config)\n        });\n    }\n\n    protected getStoredPaymentMethodDetails(storedPaymentMethodId: string) {\n        return this.core.paymentMethodsResponse.findStoredPaymentMethod(storedPaymentMethodId);\n    }\n\n    /**\n     *  Get the payment method from the paymentMethodsResponse\n     *\n     * @param type - The type of the payment method to get. (This prop is passed by Drop-in OR Standalone components containing the property 'type' as part of their configuration)\n     * @param paymentMethodId - Unique internal payment method ID\n     */\n    protected getPaymentMethodFromPaymentMethodsResponse(type?: string, paymentMethodId?: string): RawPaymentMethod {\n        if (paymentMethodId) return this.core.paymentMethodsResponse.findById(paymentMethodId);\n        return this.core.paymentMethodsResponse?.find(type || this.constructor['type']);\n    }\n\n    protected storeElementRefOnCore(props?: P) {\n        if (!props?.isDropin) {\n            this.core.storeElementReference(this);\n        }\n    }\n\n    public isAvailable(): Promise<void> {\n        return Promise.resolve();\n    }\n\n    public setState(newState: object): void {\n        this.state = { ...this.state, ...newState };\n        this.onChange();\n    }\n\n    public showValidation(): this {\n        if (this.componentRef && this.componentRef.showValidation) this.componentRef.showValidation();\n        return this;\n    }\n\n    /**\n     * Updates the amount in the props and propagates it to the AmountProvider.\n     * This allows children components to access the updated amount via context.\n     *\n     * @param amount - Primary payment amount object\n     * @param secondaryAmount - Optional secondary amount for display purposes (e.g., converted currency)\n     * @internal\n     */\n    public updateAmount(amount: PaymentAmount, secondaryAmount?: PaymentAmount): void {\n        this.props = {\n            ...this.props,\n            ...(amount && { amount }),\n            ...(secondaryAmount && { secondaryAmount })\n        };\n        this.amountProviderRef.current?.update(amount, secondaryAmount);\n    }\n\n    /**\n     * elementRef is a ref to the subclass that extends UIElement e.g. Card.tsx\n     */\n    public setElementStatus(status: UIElementStatus, props?: any): this {\n        this.elementRef?.setStatus(status, props);\n        return this;\n    }\n\n    /**\n     * componentRef is a ref to the primary component inside that subclass e.g. CardInput.tsx\n     */\n    public setStatus(status: UIElementStatus, props?): this {\n        if (this.componentRef?.setStatus) {\n            this.componentRef.setStatus(status, props);\n        }\n        return this;\n    }\n\n    protected onChange(): void {\n        this.props.onChange?.(\n            {\n                data: this.data,\n                isValid: this.isValid,\n                errors: this.state.errors,\n                valid: this.state.valid\n            },\n            this.elementRef\n        );\n    }\n\n    protected override submitAnalytics(event: AbstractAnalyticsEvent) {\n        this.analytics.sendAnalytics(event);\n    }\n\n    public submit(): void {\n        if (!this.isValid) {\n            this.showValidation();\n            return;\n        }\n\n        this.makePaymentsCall()\n            .then(sanitizeResponse)\n            .then(verifyPaymentDidNotFail)\n            .then(this.handleResponse)\n            .catch((e: PaymentResponseData | Error) => {\n                if (e instanceof CancelError) {\n                    this.setElementStatus('ready');\n                    return;\n                }\n                this.handleFailedResult(e as PaymentResponseData);\n            });\n    }\n\n    protected makePaymentsCall(): Promise<CheckoutAdvancedFlowResponse | CheckoutSessionPaymentResponse> {\n        this.setElementStatus('loading');\n\n        if (this.props.onSubmit) {\n            return this.submitUsingAdvancedFlow();\n        }\n\n        if (this.core.session) {\n            const beforeSubmitEvent: Promise<PaymentData> = this.props.beforeSubmit\n                ? new Promise((resolve, reject) => {\n                      void this.props.beforeSubmit(this.data, this.elementRef, {\n                          resolve,\n                          reject: () => reject(new CancelError('beforeSubmitRejected'))\n                      });\n                  })\n                : Promise.resolve(this.data);\n\n            return beforeSubmitEvent.then(this.submitUsingSessionsFlow);\n        }\n\n        this.handleError(\n            new AdyenCheckoutError(\n                'IMPLEMENTATION_ERROR',\n                'It can not perform /payments call. Callback \"onSubmit\" is missing or Checkout session is not available'\n            )\n        );\n    }\n\n    private async submitUsingAdvancedFlow(): Promise<CheckoutAdvancedFlowResponse> {\n        const event = new AnalyticsLogEvent({\n            component: this.type,\n            type: LogEventType.submit,\n            message: 'Shopper clicked pay'\n        });\n        this.submitAnalytics(event);\n\n        return new Promise<CheckoutAdvancedFlowResponse>((resolve, reject) => {\n            this.props.onSubmit(\n                {\n                    data: this.data,\n                    isValid: this.isValid\n                },\n                this.elementRef,\n                { resolve, reject }\n            );\n        });\n    }\n\n    private async submitUsingSessionsFlow(data: PaymentData): Promise<CheckoutSessionPaymentResponse> {\n        const event = new AnalyticsLogEvent({\n            component: this.type,\n            type: LogEventType.submit,\n            message: 'Shopper clicked pay'\n        });\n        this.submitAnalytics(event);\n\n        try {\n            return await this.core.session.submitPayment(data);\n        } catch (error: unknown) {\n            if (error instanceof AdyenCheckoutError) {\n                this.handleError(error);\n            } else {\n                this.handleError(new AdyenCheckoutError('ERROR', 'Error when making /payments call', { cause: error }));\n            }\n\n            return Promise.reject(error);\n        }\n\n        // // Uncomment to simulate failed\n        // return {\n        //     resultCode: 'Refused',\n        //     sessionData:\n        //         'Ab02b4c0!BQABAgBKGgqfEz8uQlU4yCIOWjA8bkEwmbJ7Qt4r+x5IPXREu1rMjwNk5MDoHFNlv+MWvinS6nXIDniXgRzXCdSC4ksw9CNDBAjOa+B88wRoj/rLTieuWh/0leR88qkV24vtIkjsIsbJTDB78Pd8wX8MEDsXhaAdEIyX9E8eqxuQ3bwPbvLs1Dlgo1ZrfkQRzaNiuVM8ejRG0IWE1bGThJzY+sJvZZHvlDMXIlxhZcDoQvsMj/WwE6+nFJxBiC3oRzmvVn3AbkLQGtvwq16UUSfYbPzG9dXypJMtcrZAQYq2g/2+BSibCcmee9AXq/wij11BERrYmjbDt5NkkdUnDVgAB7pdqbnWX0A2sxBKeYtLSP2kxp+5LoU/Wty3fmcVA3VKVkHfgmIihkeL8lY++5hvHjnkzOE4tyx/sheiKS4zqoWE43TD6n8mpFskAzwMHq4G2o6vkXqvaKFEq7y/R2fVrCypenmRhkPASizpM265rKLU+L4E/C+LMHfN0LYKRMCrLr0gI2GAp+1PZLHgh0tCtiJC/zcJJtJs6sHNQxLUN+kxJuELUHOcuL3ivjG+mWteUnBENZu7KqOSZYetiWYRiyLOXDiBHqbxuQwTuO54L15VLkS/mYB20etibM1nn+fRmbo+1IJkCSalhwi5D7fSrpjbQTmAsOpJT1N8lC1MSNmAvAwG1kWL4JxYwXDKYyYASnsia2V5IjoiQUYwQUFBMTAzQ0E1MzdFQUVEODdDMjRERDUzOTA5QjgwQTc4QTkyM0UzODIzRDY4REFDQzk0QjlGRjgzMDVEQyJ98uZI4thGveOByYbomCeeP2Gy2rzs99FOBoDYVeWIUjyM+gfnW89DdJZAhxe74Tv0TnL5DRQYPCTRQPOoLbQ21NaeSho70FNE+n8XYKlVK5Ore6BoB6IVCaal5MkM27VmZPMmGflgcPx+pakx+EmRsYGdvYNImYxJYrRk3CI+l3T3ZiVpPPqebaVSLaSkEfu0iOFPjjLUhWN6QW6c18heE5vq/pcoeBf7p0Jgr9I5aBFY0avYG57BDGHzU1ZiQ9LLMTis2BA7Ap9pdNq8FVXL4fnoVHNZiiANOf3uvSknPKBID8sdOXUStA0crmO322FYjDqh1n6FG+D7+OJSayNsXIz6Zoy0eFn4HbT8nt8L2X2tdzkMayCYHXRwKh13Xyleqxt4WoEZmhwTmB3p9d1F0SylWnjcC6o/DnshJ9mMW/8D3oWS30Z7BwRODqKGVahRD0YGRzwMbVnEe5JFRfNvJZdLGl35L9632DVmuFQ0lr/8WNL/NrAJNtI6PXrZMNiza0/omPwPfe5ZYuD1Jgq59TX4h9d+3fdkArcJYL7AdoMZON1YEiWY5EzazQwtHd9yzdty9ZHPxAfuOfCh4OhbhFNp+v5YQ+PzKZ+UpM1VxV863+9XgWEURPNvX7qq1cpUSRzrSGq01QBBM3MKzRh5mAgqIdXgtl7L0EXAep0MECc7QY0/o3tW3VR8eEJGsSzrNxpFItqj0SEaIWo25dRfkl5zuw47GQrN9Qzxl2WV3A38MQPUqFtIr/71Rjkphgg49ZGWEYCwgFmm8jJc2/5qTabSGk4bzwiETCTzeydq30bUGqCwglj8CrFViAuQeTJm7dp+PYKMkUNvQRpnSXMj6Kz7rvAMzhzJgK62ltN2idqKxLC7WtivCUgejuQUvNreCYBQCaKwTwP02lZsJpGF9yw8gbyuoB+2aB7IZmgIB8GP4qVQ/ht5B9z/FLohK/8cSPV/4i32SNNdcwhV',\n        //     sessionResult:\n        //         'X3XtfGC7!H4sIAAAAAAAA/6tWykxRslJyDjaxNDMyM3E2MXIyNDUys3RU0lHKTS1KzkjMK3FMTs4vzSsBKgtJLS7xhYo6Z6QmZ+eXlgAVFpcklpQWA+WLUtNKi1NTlGoBMEEbz1cAAAA=iMsCaEJ5LcnsqIUtmNxjm8HtfQ8gZW8JewEU3wHz4qg='\n        // };\n    }\n\n    protected onComplete(state): void {\n        this.handleAdditionalDetails(state);\n    }\n\n    protected handleError = (error: AdyenCheckoutError): void => {\n        /**\n         * Set status using elementRef, which:\n         * - If Drop-in, will set status for Dropin component, and then it will propagate the new status for the active payment method component\n         * - If Component, it will set its own status\n         */\n        this.setElementStatus('ready');\n\n        if (error.name === NETWORK_ERROR && error.options.code) {\n            const event = new AnalyticsErrorEvent({\n                component: this.type,\n                errorType: ErrorEventType.apiError,\n                code: error.options.code\n            });\n\n            this.submitAnalytics(event);\n        }\n\n        if (this.props.onError) {\n            this.props.onError(error, this.elementRef);\n        }\n    };\n\n    protected handleAdditionalDetails(state: AdditionalDetailsData): void {\n        this.makeAdditionalDetailsCall(state)\n            .then(sanitizeResponse)\n            .then(verifyPaymentDidNotFail)\n            .then(this.handleResponse)\n            .catch(this.handleFailedResult);\n    }\n\n    private makeAdditionalDetailsCall(state: AdditionalDetailsData): Promise<CheckoutSessionDetailsResponse | CheckoutAdvancedFlowResponse> {\n        if (this.props.onAdditionalDetails) {\n            return new Promise<CheckoutAdvancedFlowResponse>((resolve, reject) => {\n                this.props.onAdditionalDetails(state, this.elementRef, { resolve, reject });\n            });\n        }\n\n        if (this.core.session) {\n            return this.submitAdditionalDetailsUsingSessionsFlow(state.data);\n        }\n\n        this.handleError(\n            new AdyenCheckoutError(\n                'IMPLEMENTATION_ERROR',\n                'It can not perform /payments/details call. Callback \"onAdditionalDetails\" is missing or Checkout session is not available'\n            )\n        );\n    }\n\n    private async submitAdditionalDetailsUsingSessionsFlow(data: any): Promise<CheckoutSessionDetailsResponse> {\n        try {\n            return await this.core.session.submitDetails(data);\n        } catch (error: unknown) {\n            if (error instanceof AdyenCheckoutError) this.handleError(error);\n            else this.handleError(new AdyenCheckoutError('ERROR', 'Error when making /details call', { cause: error }));\n\n            return Promise.reject(error);\n        }\n    }\n\n    public handleAction(action: PaymentAction, props = {}): UIElement | null {\n        if (!action || !action.type) {\n            if (hasOwnProperty(action, 'action') && hasOwnProperty(action, 'resultCode')) {\n                throw new Error(\n                    'handleAction::Invalid Action - the passed action object itself has an \"action\" property and ' +\n                        'a \"resultCode\": have you passed in the whole response object by mistake?'\n                );\n            }\n            throw new Error('handleAction::Invalid Action - the passed action object does not have a \"type\" property');\n        }\n\n        const paymentAction = this.core.createFromAction(action, {\n            ...this.elementRef.props,\n            ...props\n        });\n\n        if (paymentAction) {\n            this.unmount();\n            return paymentAction.mount(this._node);\n        }\n\n        return null;\n    }\n\n    protected onActionHandled(actionHandledObj: ActionHandledReturnObject) {\n        this.props?.onActionHandled?.({ originalAction: this.props.originalAction, ...actionHandledObj });\n    }\n\n    protected handleOrder = (response: PaymentResponseData): void => {\n        const { order } = response;\n\n        const updateCorePromise = this.core.session ? this.core.update({ order }) : this.handleAdvanceFlowPaymentMethodsUpdate(order);\n\n        void updateCorePromise.then(() => {\n            this.props.onOrderUpdated?.({ order });\n        });\n    };\n\n    /**\n     * Handles when the payment fails. The payment fails when:\n     * - adv flow: the merchant rejects the payment due to a critical error\n     * - adv flow: the merchant resolves the payment with a failed resultCode\n     * - sessions: a network error occurs when making the payment\n     * - sessions: the payment fails with a failed resultCode\n     *\n     * @param result\n     */\n    protected handleFailedResult = (result?: PaymentResponseData): void => {\n        if (assertIsDropin(this.elementRef)) {\n            this.elementRef.displayFinalAnimation('error');\n        }\n\n        cleanupFinalResult(result);\n        this.props.onPaymentFailed?.(result, this.elementRef);\n    };\n\n    protected handleSuccessResult = (result: PaymentResponseData): void => {\n        if (assertIsDropin(this.elementRef)) {\n            this.elementRef.displayFinalAnimation('success');\n        }\n\n        cleanupFinalResult(result);\n        this.props.onPaymentCompleted?.(result, this.elementRef);\n    };\n\n    /**\n     * Handles a /payments or /payments/details response.\n     * The component will handle automatically actions, orders, and final results.\n     *\n     * Expected to be called after sanitizeResponse has been run on the raw payment response\n     *\n     * @param response -\n     */\n    protected handleResponse(response: PaymentResponseData): void {\n        if (response.action) {\n            this.elementRef.handleAction(response.action);\n            return;\n        }\n\n        if (response.order?.remainingAmount?.value > 0) {\n            // we don't want to call elementRef here, use the component handler\n            // we do this way so the logic on handlingOrder is associated with payment method\n            this.handleOrder(response);\n            return;\n        }\n\n        this.handleSuccessResult(response);\n    }\n\n    protected handleKeyPress(e: h.JSX.TargetedKeyboardEvent<HTMLInputElement> | KeyboardEvent) {\n        if (e.key === 'Enter' || e.code === 'Enter') {\n            e.preventDefault(); // Prevent <form> submission if Component is placed inside a form\n\n            this.onEnterKeyPressed(document?.activeElement, this);\n        }\n    }\n\n    /**\n     * Handle Enter key pressed from a UIElement (called via handleKeyPress)\n     * @param obj\n     */\n    protected onEnterKeyPressed(activeElement: Element, component: UIElement) {\n        if (this.props.onEnterKeyPressed) {\n            this.props.onEnterKeyPressed(activeElement, component);\n        } else {\n            (activeElement as HTMLElement).blur();\n            this.submit();\n        }\n    }\n\n    /**\n     * Call update on parent instance\n     * This function exist to make safe access to the protected _parentInstance\n     * @param options - CoreOptions\n     */\n    public updateParent(options: CoreConfiguration = {}): Promise<ICore> {\n        return this.elementRef.core.update(options);\n    }\n\n    public setComponentRef = (ref: ComponentMethodsRef) => {\n        this.componentRef = ref;\n    };\n\n    /**\n     * Get the current validation status of the element\n     */\n    public get isValid(): boolean {\n        return false;\n    }\n\n    /**\n     * Get the element icon URL for the current environment\n     */\n    public get icon(): string {\n        const type = this.props.paymentMethodType || this.type;\n        return this.props.icon ?? this.resources.getImage()(type);\n    }\n\n    /**\n     * Get the element's displayable name\n     */\n    public get displayName(): string {\n        const paymentMethodFromResponse = this.core.paymentMethodsResponse?.paymentMethods?.find(pm => pm.type === this.type);\n        return this.props.name || paymentMethodFromResponse?.name || this.type;\n    }\n\n    /**\n     * Get the element accessible name, used in the aria-label of the button that controls selected payment method\n     */\n    public get accessibleName(): string {\n        return this.displayName;\n    }\n\n    /**\n     * Used to display the second line of a payment method item\n     */\n    get additionalInfo(): string {\n        return null;\n    }\n\n    /**\n     * Return the type of an element\n     */\n    public get type(): string {\n        return this.props.type || this.constructor['type'];\n    }\n\n    /**\n     * Get the payButton component for the current element\n     */\n    protected payButton = (props: PayButtonProps) => {\n        return <PayButton {...props} onClick={this.submit} />;\n    };\n\n    /**\n     * Used in the Partial Orders flow.\n     * When the Order is updated, the merchant can request new payment methods based on the new remaining amount\n     *\n     * @private\n     */\n    protected async handleAdvanceFlowPaymentMethodsUpdate(order: Order | null, amount?: PaymentAmount) {\n        return new Promise<void | PaymentMethodsResponse>((resolve, reject) => {\n            if (!this.props.onPaymentMethodsRequest) {\n                return resolve();\n            }\n\n            this.props.onPaymentMethodsRequest(\n                {\n                    ...(order && {\n                        order: {\n                            orderData: order.orderData,\n                            pspReference: order.pspReference\n                        }\n                    }),\n                    locale: this.core.options.locale\n                },\n                { resolve, reject }\n            );\n        })\n            .catch(error => {\n                this.handleError(\n                    new AdyenCheckoutError(\n                        'IMPLEMENTATION_ERROR',\n                        'Something failed during payment methods update or onPaymentMethodsRequest was not implemented',\n                        {\n                            cause: error\n                        }\n                    )\n                );\n            })\n            .then(paymentMethodsResponse => {\n                // in the case of the session flow we get order, amount, countryCode and shopperLocale from initialize()\n                // apply the same logic here for order and amount\n                // in the future it might be worth moving this logic to be performed by the core on update()\n                // it would make this more consistent\n                return this.core.update({\n                    ...(paymentMethodsResponse && { paymentMethodsResponse }),\n                    order,\n                    amount: order ? order.remainingAmount : amount\n                });\n            });\n    }\n\n    protected abstract componentToRender(): h.JSX.Element;\n\n    render() {\n        return (\n            <CoreProvider i18n={this.props.i18n} loadingContext={this.props.loadingContext} resources={this.resources} analytics={this.analytics}>\n                <SRPanelProvider srPanel={this.srPanel}>\n                    <AmountProvider amount={this.props.amount} secondaryAmount={this.props.secondaryAmount} providerRef={this.amountProviderRef}>\n                        {this.componentToRender()}\n                    </AmountProvider>\n                </SRPanelProvider>\n            </CoreProvider>\n        );\n    }\n}\n\nexport default UIElement;\n"],"names":["UIElement","BaseElement","createBeforeRenderHook","configSetByMerchant","originalRender","this","render","args","beforeRender","apply","originalAction","event","AnalyticsInfoEvent","_object_spread","type","InfoEventType","rendered","component","configData","_object_spread_props","showPayButton","props","oneClick","isStoredPaymentMethod","analytics","sendAnalytics","reportIntegrationFlavor","sendFlavor","core","modules","srPanel","getPaymentMethodConfigFromResponse","componentProps","storedPaymentMethodId","getStoredPaymentMethodDetails","getPaymentMethodFromPaymentMethodsResponse","paymentMethodId","buildElementProps","finalProps","getCorePropsForComponent","isDropinInstance","assertIsDropin","formatProps","constructor","getRegulatoryDefaults","options","countryCode","paymentMethodsResponse","findStoredPaymentMethod","_this_core_paymentMethodsResponse","findById","find","storeElementRefOnCore","isDropin","storeElementReference","isAvailable","Promise","resolve","setState","newState","state","onChange","showValidation","componentRef","updateAmount","amount","secondaryAmount","_this_amountProviderRef_current","amountProviderRef","current","update","setElementStatus","status","_this_elementRef","elementRef","setStatus","_this_componentRef","_this_props_onChange","_this_props","call","data","isValid","errors","valid","submitAnalytics","submit","makePaymentsCall","then","sanitizeResponse","verifyPaymentDidNotFail","handleResponse","catch","e","CancelError","handleFailedResult","onSubmit","submitUsingAdvancedFlow","session","beforeSubmit","reject","submitUsingSessionsFlow","handleError","AdyenCheckoutError","AnalyticsLogEvent","LogEventType","message","submitPayment","error","cause","onComplete","handleAdditionalDetails","makeAdditionalDetailsCall","onAdditionalDetails","submitAdditionalDetailsUsingSessionsFlow","submitDetails","handleAction","action","hasOwnProperty","Error","paymentAction","createFromAction","unmount","mount","_node","onActionHandled","actionHandledObj","_this_props_onActionHandled","response","order","remainingAmount","value","handleOrder","handleSuccessResult","handleKeyPress","document","key","code","preventDefault","onEnterKeyPressed","activeElement","blur","updateParent","icon","_this_props_icon","paymentMethodType","resources","getImage","displayName","_this_core_paymentMethodsResponse_paymentMethods","paymentMethodFromResponse","paymentMethods","pm","name","accessibleName","additionalInfo","handleAdvanceFlowPaymentMethodsUpdate","onPaymentMethodsRequest","orderData","pspReference","locale","h","CoreProvider","i18n","loadingContext","SRPanelProvider","AmountProvider","providerRef","componentToRender","checkout","super","_define_property","createRef","NETWORK_ERROR","AnalyticsErrorEvent","errorType","ErrorEventType","apiError","onError","_this_props_onOrderUpdated","onOrderUpdated","result","_this_props_onPaymentFailed","displayFinalAnimation","cleanupFinalResult","onPaymentFailed","_this_props_onPaymentCompleted","onPaymentCompleted","setComponentRef","ref","payButton","PayButton","onClick","register","bind","undefined","txVariants"],"mappings":"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"}