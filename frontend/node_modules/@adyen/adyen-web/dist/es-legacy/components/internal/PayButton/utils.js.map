{"version":3,"file":"utils.js","sources":["../../../../../src/components/internal/PayButton/utils.ts"],"sourcesContent":["import Language from '../../../language';\nimport type { PaymentAmount } from '../../../types/global-types';\n\nexport const PAY_BTN_DIVIDER = '/ ';\n\nconst amountLabel = (i18n, amount: PaymentAmount) =>\n    !!amount?.value && !!amount?.currency ? i18n.amount(amount.value, amount.currency, { currencyDisplay: amount.currencyDisplay || 'symbol' }) : '';\n\nconst payAmountLabel = (i18n: Language, amount: PaymentAmount) => `${i18n.get('payButton')} ${amountLabel(i18n, amount)}`;\n\nconst formatSecondaryAmountLabel = (i18n: Language, secondaryAmount: PaymentAmount) => {\n    const convertedSecondaryAmount =\n        secondaryAmount && !!secondaryAmount?.value && !!secondaryAmount?.currency\n            ? i18n.amount(secondaryAmount.value, secondaryAmount.currency, { currencyDisplay: secondaryAmount.currencyDisplay || 'symbol' })\n            : '';\n\n    const divider = convertedSecondaryAmount.length ? PAY_BTN_DIVIDER : '';\n\n    return `${divider}${convertedSecondaryAmount}`;\n};\n\nfunction createButtonLabel(i18n: Language, customLabel: string, amount: PaymentAmount, isZeroAuth: boolean, customAmount?: PaymentAmount): string {\n    if (customLabel) {\n        return customLabel;\n    }\n\n    if (customAmount) {\n        return payAmountLabel(i18n, customAmount);\n    }\n\n    return isZeroAuth ? i18n.get('confirmPreauthorization') : payAmountLabel(i18n, amount);\n}\n\n/**\n * Show the secondaryLabel if:\n *  - it's not zero auth, and\n *  - we don't have a predefined label (i.e. redirect, qrcode, await based comps...), and\n *  - we do have an amount object (merchant might not be passing this in order to not show the amount on the button), and\n *  - we have a secondaryAmount object with some properties\n */\nfunction createSecondaryLabel(\n    i18n: Language,\n    secondaryAmount: PaymentAmount,\n    isAmountValid: boolean,\n    isZeroAuth: boolean,\n    customLabel: string\n): string | null {\n    if (isZeroAuth || customLabel || !isAmountValid || !secondaryAmount) {\n        return null;\n    }\n    return formatSecondaryAmountLabel(i18n, secondaryAmount);\n}\n\nexport { payAmountLabel, amountLabel, createButtonLabel, createSecondaryLabel };\n"],"names":["PAY_BTN_DIVIDER","amountLabel","i18n","amount","value","currency","currencyDisplay","payAmountLabel","get","createButtonLabel","customLabel","isZeroAuth","customAmount","createSecondaryLabel","secondaryAmount","isAmountValid","convertedSecondaryAmount","length","formatSecondaryAmountLabel"],"mappings":"AAGO,MAAMA,EAAkB,KAEzBC,EAAc,CAACC,EAAMC,KACrBA,aAAAA,EAAAA,EAAQC,SAAWD,aAAAA,EAAAA,EAAQE,UAAWH,EAAKC,OAAOA,EAAOC,MAAOD,EAAOE,SAAU,CAAEC,gBAAiBH,EAAOG,iBAAmB,WAAc,GAE5IC,EAAiB,CAACL,EAAgBC,IAA0B,GAAGD,EAAKM,IAAI,gBAAgBP,EAAYC,EAAMC,KAahH,SAASM,EAAkBP,EAAgBQ,EAAqBP,EAAuBQ,EAAqBC,GACxG,OAAIF,IAIAE,EACOL,EAAeL,EAAMU,GAGzBD,EAAaT,EAAKM,IAAI,2BAA6BD,EAAeL,EAAMC,GACnF,CASA,SAASU,EACLX,EACAY,EACAC,EACAJ,EACAD,GAEA,OAAIC,GAAcD,IAAgBK,IAAkBD,EACzC,KAtCoB,EAACZ,EAAgBY,KAChD,MAAME,EACFF,IAAqBA,eAAAA,EAAiBV,SAAWU,eAAAA,EAAiBT,UAC5DH,EAAKC,OAAOW,EAAgBV,MAAOU,EAAgBT,SAAU,CAAEC,gBAAiBQ,EAAgBR,iBAAmB,WACnH,GAIV,MAAO,GAFSU,EAAyBC,OAbd,KAayC,KAEhDD,KAgCbE,CAA2BhB,EAAMY,EAC5C"}