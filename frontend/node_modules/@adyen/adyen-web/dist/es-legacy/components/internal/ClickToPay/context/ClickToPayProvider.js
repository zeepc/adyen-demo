import{createElement as t}from"../../../../external/preact/dist/preact.js";import{CtpState as o}from"../services/ClickToPayService.js";import{ClickToPayContext as e}from"./ClickToPayContext.js";import{useState as a,useRef as n,useEffect as i,useCallback as s}from"../../../../external/preact/hooks/dist/hooks.js";const r=({isStandaloneComponent:r=!1,clickToPayService:l,configuration:d,children:c,setClickToPayRef:u,onSubmit:p,onSetStatus:v,onError:y})=>{var S,m;const[C]=a(l),[f,h]=a((null==l?void 0:l.state)||o.NotAvailable),[k,I]=a(!0),[P,w]=a("ready"),b=n({}),g=n(!1);i(()=>{u(b.current),b.current.setStatus=w},[]),i(()=>{null==C||C.subscribeOnStateChange(t=>h(t))},[C]);const E=s(()=>{var t;g.current||(null===(t=d.onReady)||void 0===t||t.call(d),g.current=!0)},[null==d?void 0:d.onReady]),V=s(async t=>{await(null==C?void 0:C.finishIdentityValidation(t))},[C]),R=s(async()=>await(null==C?void 0:C.startIdentityValidation()),[C]),j=s(async t=>await(null==C?void 0:C.checkout(t)),[C]),x=s(async t=>await(null==C?void 0:C.verifyIfShopperIsEnrolled(t)),[C]),T=s(async()=>{await(null==C?void 0:C.logout())},[C]),M=s(t=>{C.updateStoreCookiesConsent(t)},[C]);return t(e.Provider,{value:{status:P,onSubmit:p,onError:y,onSetStatus:v,configuration:d,isStoringCookies:null==C?void 0:C.storeCookies,isStandaloneComponent:r,isCtpPrimaryPaymentMethod:k,setIsCtpPrimaryPaymentMethod:I,ctpState:f,verifyIfShopperIsEnrolled:x,cards:null==C?void 0:C.shopperCards,schemes:null==C?void 0:C.schemes,otpMaskedContact:null==C||null===(S=C.identityValidationData)||void 0===S?void 0:S.maskedShopperContact,otpNetwork:null==C||null===(m=C.identityValidationData)||void 0===m?void 0:m.selectedNetwork,checkout:j,logoutShopper:T,startIdentityValidation:R,finishIdentityValidation:V,updateStoreCookiesConsent:M,onReady:E}},c)};export{r as default};
//# sourceMappingURL=ClickToPayProvider.js.map
