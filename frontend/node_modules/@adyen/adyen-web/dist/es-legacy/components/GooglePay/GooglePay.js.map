{"version":3,"file":"GooglePay.js","sources":["../../../../src/components/GooglePay/GooglePay.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport GooglePayService from './GooglePayService';\nimport GooglePayButton from './components/GooglePayButton';\nimport defaultProps from './defaultProps';\nimport { formatGooglePayContactToAdyenAddressFormat, getGooglePayLocale } from './utils';\nimport collectBrowserInfo from '../../utils/browserInfo';\nimport AdyenCheckoutError from '../../core/Errors/AdyenCheckoutError';\nimport { TxVariants } from '../tx-variants';\nimport { sanitizeResponse, verifyPaymentDidNotFail } from '../internal/UIElement/utils';\n\nimport type { AddressData, BrowserInfo, RawPaymentMethod, PaymentResponseData, RawPaymentResponse } from '../../types/global-types';\nimport type { GooglePayConfiguration } from './types';\nimport type { ICore } from '../../core/types';\nimport { AnalyticsInfoEvent, InfoEventType, UiTarget } from '../../core/Analytics/events/AnalyticsInfoEvent';\nimport { mapGooglePayBrands } from './utils/map-adyen-brands-to-googlepay-brands';\n\nconst DEFAULT_ALLOWED_CARD_NETWORKS: google.payments.api.CardNetwork[] = ['AMEX', 'DISCOVER', 'JCB', 'MASTERCARD', 'VISA'];\n\nclass GooglePay extends UIElement<GooglePayConfiguration> {\n    public static type = TxVariants.googlepay;\n    public static txVariants = [TxVariants.googlepay, TxVariants.paywithgoogle];\n    public static defaultProps = defaultProps;\n\n    protected readonly googlePay;\n\n    constructor(checkout: ICore, props?: GooglePayConfiguration) {\n        super(checkout, props);\n        this.handleAuthorization = this.handleAuthorization.bind(this);\n        this.showGooglePayPaymentSheet = this.showGooglePayPaymentSheet.bind(this);\n\n        const { isExpress, paymentDataCallbacks } = this.props;\n\n        if (isExpress === false && paymentDataCallbacks?.onPaymentDataChanged) {\n            throw new AdyenCheckoutError(\n                'IMPLEMENTATION_ERROR',\n                'GooglePay - You must set \"isExpress\" flag to \"true\" in order to use \"onPaymentDataChanged\" callback'\n            );\n        }\n\n        if (!this.props.configuration.merchantId) {\n            throw new AdyenCheckoutError(\n                'IMPLEMENTATION_ERROR',\n                'GooglePay - Missing merchantId. Please ensure that it is correctly configured in your customer area.'\n            );\n        }\n\n        this.googlePay = new GooglePayService(this.props.environment, this.analytics, {\n            ...(isExpress && paymentDataCallbacks?.onPaymentDataChanged && { onPaymentDataChanged: paymentDataCallbacks.onPaymentDataChanged }),\n            onPaymentAuthorized: this.onPaymentAuthorized\n        });\n    }\n\n    /**\n     * Google Pay requires custom logic due to supporting two Tx variants that lead to the same payment method.\n     * If the merchant creates a standalone Google Pay component, we need to verify if the payment method is available using both tx variants\n     *\n     * @param type\n     * @param paymentMethodId - Unique internal payment method ID\n     * @returns\n     */\n    protected override getPaymentMethodFromPaymentMethodsResponse(type?: string, paymentMethodId?: string): RawPaymentMethod {\n        if (paymentMethodId) return this.core.paymentMethodsResponse.findById(paymentMethodId);\n\n        return (\n            this.core.paymentMethodsResponse.find(type || this.constructor['type']) || this.core.paymentMethodsResponse.find(TxVariants.paywithgoogle)\n        );\n    }\n\n    protected override formatProps(props: GooglePayConfiguration): GooglePayConfiguration {\n        const buttonSizeMode = props.buttonSizeMode ?? (props.isDropin ? 'fill' : 'static');\n        const buttonLocale = getGooglePayLocale(props.buttonLocale ?? props.i18n?.locale);\n\n        const callbackIntents: google.payments.api.CallbackIntent[] = [...props.callbackIntents, 'PAYMENT_AUTHORIZATION'];\n\n        const allowedCardNetworks = this.createAllowedCardNetworksValues({\n            allowedCardNetworks: props.allowedCardNetworks,\n            brands: props.brands\n        });\n\n        return {\n            ...props,\n            allowedCardNetworks,\n            configuration: props.configuration,\n            buttonSizeMode,\n            buttonLocale,\n            callbackIntents\n        };\n    }\n\n    /**\n     * Formats the component data output\n     */\n    protected override formatData() {\n        const { googlePayCardNetwork, googlePayToken, billingAddress, deliveryAddress } = this.state;\n        const { isExpress } = this.props;\n\n        return {\n            paymentMethod: {\n                type: this.type,\n                googlePayCardNetwork,\n                googlePayToken,\n                ...(isExpress && { subtype: 'express' })\n            },\n            browserInfo: this.browserInfo,\n            origin: !!window && window.location.origin,\n            ...(billingAddress && { billingAddress }),\n            ...(deliveryAddress && { deliveryAddress })\n        };\n    }\n\n    /**\n     * Generate the 'allowedCardNetworks' value used by Google Pay\n     *\n     * If the 'allowedCardNetworks' is defined in the Component configuration, it will be used. Otherwise we fallback\n     * to use the 'brands' returned by the backoffice. It can be that 'brands' is not returned, which in this case we\n     * set default values\n     *\n     * @param {object} brandsConfig\n     * @param brandsConfig.allowedCardNetworks - Brands set in the component config\n     * @param brandsConfig.brands - Brands returned by backend\n     * @private\n     */\n    private createAllowedCardNetworksValues({\n        allowedCardNetworks,\n        brands\n    }: {\n        allowedCardNetworks?: google.payments.api.CardNetwork[];\n        brands?: string[];\n    }): google.payments.api.CardNetwork[] {\n        if (allowedCardNetworks?.length > 0) return allowedCardNetworks;\n        if (brands?.length > 0) return mapGooglePayBrands(brands);\n\n        return DEFAULT_ALLOWED_CARD_NETWORKS;\n    }\n\n    protected override beforeRender(configSetByMerchant?: GooglePayConfiguration) {\n        // We don't send 'rendered' events when rendering actions\n        if (configSetByMerchant?.originalAction) {\n            return;\n        }\n\n        const event = new AnalyticsInfoEvent({\n            type: InfoEventType.rendered,\n            component: this.type,\n            configData: { ...configSetByMerchant, showPayButton: this.props.showPayButton },\n            ...(configSetByMerchant?.isExpress && { isExpress: configSetByMerchant.isExpress }),\n            ...(configSetByMerchant?.expressPage && { expressPage: configSetByMerchant.expressPage })\n        });\n\n        this.analytics.sendAnalytics(event);\n    }\n\n    /**\n     * Displays the Google Pay payment sheet overlay\n     */\n    private showGooglePayPaymentSheet() {\n        this.googlePay.initiatePayment(this.props, this.core.options.countryCode).catch((error: google.payments.api.PaymentsError) => {\n            // eslint-disable-next-line @typescript-eslint/no-base-to-string\n            this.handleError(new AdyenCheckoutError(error.statusCode === 'CANCELED' ? 'CANCEL' : 'ERROR', error.toString(), { cause: error }));\n        });\n    }\n\n    public override submit = () => {\n        if (this.props.isInstantPayment) {\n            const event = new AnalyticsInfoEvent({\n                component: this.type,\n                type: InfoEventType.selected,\n                target: UiTarget.instantPaymentButton\n            });\n\n            this.submitAnalytics(event);\n        }\n\n        new Promise<void>((resolve, reject) => this.props.onClick(resolve, reject)).then(this.showGooglePayPaymentSheet).catch(() => {\n            // Swallow exception triggered by onClick reject\n        });\n    };\n\n    /**\n     * Method called when the payment is authorized in the payment sheet\n     *\n     * @see https://developers.google.com/pay/api/web/reference/client#onPaymentAuthorized\n     **/\n    private onPaymentAuthorized = async (paymentData: google.payments.api.PaymentData): Promise<google.payments.api.PaymentAuthorizationResult> => {\n        const billingAddress: AddressData = formatGooglePayContactToAdyenAddressFormat(paymentData.paymentMethodData.info.billingAddress);\n        const deliveryAddress: AddressData = formatGooglePayContactToAdyenAddressFormat(paymentData.shippingAddress, true);\n\n        this.setState({\n            authorizedEvent: paymentData,\n            googlePayToken: paymentData.paymentMethodData.tokenizationData.token,\n            googlePayCardNetwork: paymentData.paymentMethodData.info.cardNetwork,\n            ...(billingAddress && { billingAddress }),\n            ...(deliveryAddress && { deliveryAddress })\n        });\n\n        return new Promise<google.payments.api.PaymentAuthorizationResult>(resolve => {\n            this.handleAuthorization()\n                .then(this.makePaymentsCall)\n                .then(sanitizeResponse)\n                .then(verifyPaymentDidNotFail)\n                .then((paymentResponse: PaymentResponseData) => {\n                    resolve({ transactionState: 'SUCCESS' });\n                    return paymentResponse;\n                })\n                .then(paymentResponse => {\n                    this.handleResponse(paymentResponse);\n                })\n                .catch((paymentResponse?: RawPaymentResponse) => {\n                    this.setElementStatus('ready');\n\n                    const googlePayError = paymentResponse?.error?.googlePayError;\n                    const fallbackMessage = this.props.i18n.get('error.subtitle.payment');\n\n                    const error: google.payments.api.PaymentDataError =\n                        typeof googlePayError === 'string' || undefined\n                            ? {\n                                  intent: 'PAYMENT_AUTHORIZATION',\n                                  reason: 'OTHER_ERROR',\n                                  message: (googlePayError as string) || fallbackMessage\n                              }\n                            : {\n                                  intent: googlePayError?.intent || 'PAYMENT_AUTHORIZATION',\n                                  reason: googlePayError?.reason || 'OTHER_ERROR',\n                                  message: googlePayError?.message || fallbackMessage\n                              };\n\n                    resolve({\n                        transactionState: 'ERROR',\n                        error\n                    });\n\n                    const responseWithError = {\n                        ...paymentResponse,\n                        error: {\n                            googlePayError: error\n                        }\n                    };\n\n                    this.handleFailedResult(responseWithError);\n                });\n        });\n    };\n\n    /**\n     * Call the 'onAuthorized' callback if available.\n     * Must be resolved/reject for the payment flow to continue\n     */\n    private async handleAuthorization(): Promise<void> {\n        return new Promise<void>((resolve, reject) => {\n            if (!this.props.onAuthorized) {\n                resolve();\n            }\n\n            const { authorizedEvent, billingAddress, deliveryAddress } = this.state;\n\n            this.props.onAuthorized(\n                {\n                    authorizedEvent,\n                    ...(billingAddress && { billingAddress }),\n                    ...(deliveryAddress && { deliveryAddress })\n                },\n                { resolve, reject }\n            );\n        }).catch((error?: google.payments.api.PaymentDataError | string) => {\n            // Format error in a way that the 'catch' of the 'onPaymentAuthorize' block accepts it\n            const data = { error: { googlePayError: error } };\n            return Promise.reject(data);\n        });\n    }\n\n    public get isValid(): boolean {\n        return true;\n    }\n\n    /**\n     * Determine a shopper's ability to return a form of payment from the Google Pay API.\n     */\n    public override async isAvailable(): Promise<void> {\n        return this.isReadyToPay()\n            .then(response => {\n                if (!response.result) {\n                    throw new AdyenCheckoutError('ERROR', 'GooglePay is not available');\n                }\n\n                if (response.paymentMethodPresent === false) {\n                    throw new AdyenCheckoutError('ERROR', 'GooglePay - No paymentMethodPresent');\n                }\n\n                return Promise.resolve();\n            })\n            .catch(error => {\n                return Promise.reject(error);\n            });\n    }\n\n    /**\n     * Determine a shopper's ability to return a form of payment from the Google Pay API.\n     */\n    public isReadyToPay = (): Promise<google.payments.api.IsReadyToPayResponse> => {\n        return this.googlePay.isReadyToPay(this.props);\n    };\n\n    /**\n     * Use this method to prefetch a PaymentDataRequest configuration to improve loadPaymentData execution time on later user interaction. No value is returned.\n     */\n    public prefetch = (): void => {\n        return this.googlePay.prefetchPaymentData(this.props, this.core.options.countryCode);\n    };\n\n    get browserInfo(): BrowserInfo {\n        return collectBrowserInfo();\n    }\n\n    get icon(): string {\n        return this.props.icon ?? this.resources.getImage()('googlepay');\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        if (this.props.showPayButton) {\n            return (\n                <GooglePayButton\n                    buttonColor={this.props.buttonColor}\n                    buttonType={this.props.buttonType}\n                    buttonSizeMode={this.props.buttonSizeMode}\n                    buttonLocale={this.props.buttonLocale}\n                    buttonRootNode={this.props.buttonRootNode}\n                    buttonRadius={this.props.buttonRadius}\n                    paymentsClient={this.googlePay.paymentsClient}\n                    onClick={this.submit}\n                />\n            );\n        }\n\n        return null;\n    }\n}\n\nexport default GooglePay;\n"],"names":["DEFAULT_ALLOWED_CARD_NETWORKS","GooglePay","UIElement","getPaymentMethodFromPaymentMethodsResponse","type","paymentMethodId","this","core","paymentMethodsResponse","findById","find","constructor","TxVariants","paywithgoogle","formatProps","props","buttonSizeMode","isDropin","buttonLocale","getGooglePayLocale","i18n","locale","callbackIntents","allowedCardNetworks","createAllowedCardNetworksValues","brands","_object_spread_props","_object_spread","configuration","formatData","googlePayCardNetwork","googlePayToken","billingAddress","deliveryAddress","state","isExpress","paymentMethod","subtype","browserInfo","origin","window","location","length","mapGooglePayBrands","beforeRender","configSetByMerchant","originalAction","event","AnalyticsInfoEvent","InfoEventType","rendered","component","configData","showPayButton","expressPage","analytics","sendAnalytics","showGooglePayPaymentSheet","googlePay","initiatePayment","options","countryCode","catch","error","handleError","AdyenCheckoutError","statusCode","toString","cause","handleAuthorization","Promise","resolve","reject","onAuthorized","authorizedEvent","data","googlePayError","isValid","isAvailable","isReadyToPay","then","response","result","paymentMethodPresent","collectBrowserInfo","icon","_this_props_icon","resources","getImage","componentToRender","h","GooglePayButton","buttonColor","buttonType","buttonRootNode","buttonRadius","paymentsClient","onClick","submit","checkout","super","_define_property","isInstantPayment","selected","target","UiTarget","instantPaymentButton","submitAnalytics","onPaymentAuthorized","async","paymentData","formatGooglePayContactToAdyenAddressFormat","paymentMethodData","info","shippingAddress","setState","tokenizationData","token","cardNetwork","makePaymentsCall","sanitizeResponse","verifyPaymentDidNotFail","paymentResponse","transactionState","handleResponse","setElementStatus","fallbackMessage","get","intent","reason","message","responseWithError","handleFailedResult","prefetch","prefetchPaymentData","bind","paymentDataCallbacks","onPaymentDataChanged","merchantId","GooglePayService","environment","googlepay","txVariants","defaultProps"],"mappings":"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"}