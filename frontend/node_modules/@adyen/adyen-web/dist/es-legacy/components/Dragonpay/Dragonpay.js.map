{"version":3,"file":"Dragonpay.js","sources":["../../../../src/components/Dragonpay/Dragonpay.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport DragonpayInput from './components/DragonpayInput';\nimport DragonpayVoucherResult from './components/DragonpayVoucherResult';\nimport { DragonpayConfiguraton } from './types';\nimport { TxVariants } from '../tx-variants';\n\nexport class DragonpayElement extends UIElement<DragonpayConfiguraton> {\n    public static type = TxVariants.dragonpay;\n\n    public static txVariants = [\n        TxVariants.dragonpay,\n        TxVariants.dragonpay_ebanking,\n        TxVariants.dragonpay_otc_banking,\n        TxVariants.dragonpay_otc_non_banking,\n        TxVariants.dragonpay_otc_philippines\n    ];\n\n    get isValid() {\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        const { issuer, shopperEmail } = this.state.data;\n\n        return {\n            ...(shopperEmail && { shopperEmail }),\n            paymentMethod: {\n                ...(issuer && { issuer }),\n                type: this.type\n            }\n        };\n    }\n\n    protected formatProps(props: DragonpayConfiguraton) {\n        return {\n            ...props,\n            issuers: props.details?.find(detail => detail.key === 'issuer')?.items ?? props.issuers\n        };\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return this.props.reference ? (\n            <DragonpayVoucherResult\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                icon={this.icon}\n                {...this.props}\n                onActionHandled={this.onActionHandled}\n            />\n        ) : (\n            <DragonpayInput\n                ref={ref => {\n                    this.componentRef = ref;\n                }}\n                items={this.props.issuers}\n                {...this.props}\n                showPayButton={this.props.showPayButton}\n                onChange={this.setState}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n            />\n        );\n    }\n}\n\nexport default DragonpayElement;\n"],"names":["DragonpayElement","UIElement","isValid","this","state","formatData","issuer","shopperEmail","data","_object_spread_props","paymentMethod","type","formatProps","props","_object_spread","issuers","_ref","details","find","detail","key","items","componentToRender","reference","h","DragonpayVoucherResult","ref","componentRef","icon","onActionHandled","DragonpayInput","showPayButton","onChange","setState","onSubmit","submit","payButton","_define_property","TxVariants","dragonpay","txVariants","dragonpay_ebanking","dragonpay_otc_banking","dragonpay_otc_non_banking","dragonpay_otc_philippines"],"mappings":"smCAOO,MAAMA,UAAyBC,EAWlC,WAAIC,GACA,QAASC,KAAKC,MAAMF,OACxB,CAKAG,UAAAA,GACI,MAAMC,OAAEA,EAAMC,aAAEA,GAAiBJ,KAAKC,MAAMI,KAE5C,OAAOC,OACCF,GAAgB,CAAEA,iBAAa,CACnCG,cAAeD,OACPH,GAAU,CAAEA,WAAO,CACvBK,KAAMR,KAAKQ,QAGvB,CAEUC,WAAAA,CAAYC,SAGLA,EAAAA,EAFb,OAAOJ,EAAAK,EAAA,CAAA,EACAD,GAAAA,CACHE,QAAsE,QAA/DC,UAAEH,EAAAA,EAAMI,eAANJ,IAAAA,GAA6C,QAA7CA,EAAAA,EAAeK,KAAKC,GAAyB,WAAfA,EAAOC,gBAArCP,OAAAA,EAAAA,EAAwDQ,aAAK,IAAAL,EAAAA,EAAIH,EAAME,SAExF,CAEmBO,iBAAAA,GACf,OAAOnB,KAAKU,MAAMU,UACdC,EAACC,EAAAA,EAAAA,EAAAA,CACGC,IAAKA,IACDvB,KAAKwB,aAAeD,GAExBE,KAAMzB,KAAKyB,MACPzB,KAAKU,OAAK,CACdgB,gBAAiB1B,KAAK0B,mBAG1BL,EAACM,EAAAA,EAAAA,EAAAA,CACGJ,IAAKA,IACDvB,KAAKwB,aAAeD,GAExBL,MAAOlB,KAAKU,MAAME,SACdZ,KAAKU,OAAK,CACdkB,cAAe5B,KAAKU,MAAMkB,cAC1BC,SAAU7B,KAAK8B,SACfC,SAAU/B,KAAKgC,OACfC,UAAWjC,KAAKiC,YAG5B,EA3DAC,EADSrC,EACKW,OAAO2B,EAAWC,WAEhCF,EAHSrC,EAGKwC,aAAa,CACvBF,EAAWC,UACXD,EAAWG,mBACXH,EAAWI,sBACXJ,EAAWK,0BACXL,EAAWM"}