import{createElement as e,Fragment as n}from"../../../../external/preact/dist/preact.js";import{useMemo as t,useState as a,useCallback as o,useEffect as s}from"../../../../external/preact/hooks/dist/hooks.js";import r from"../../../../_virtual/index.js";import i from"../../../internal/Toggle/Toggle.js";import l from"../../../internal/Img/Img.js";import c from"../../../../core/Context/useImage.js";import m from"./USOnlyPhoneInput.js";import{InfoButton as f}from"./InfoButton.js";import{useCoreContext as d}from"../../../../core/Context/CoreProvider.js";import{LabelOnlyDisclaimerMessage as u}from"../../../internal/DisclaimerMessage/DisclaimerMessage.js";import{isConfigurationValid as g}from"./utils/validate-configuration.js";import p from"./utils/mobile-number-formatter.js";import{AnalyticsInfoEvent as y,UiTarget as b,InfoEventType as h}from"../../../../core/Analytics/events/AnalyticsInfoEvent.js";function j(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},a=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.forEach(function(n){j(e,n,t[n])})}return e}const v=["mc","visa"],C=({showConsent:j,defaultToggleState:C,termsAndConditionsLink:S,privacyPolicyLink:_,termsAndConditionsVersion:O,fastlaneSessionId:w,currentDetectedBrand:I,telephoneNumber:T,onChange:x,onSubmitAnalytics:P,type:A})=>{const D=t(()=>j&&v.includes(I),[j,I]),[N,L]=a(D),[E,V]=a(C),F=c(),[M,B]=a(""),{i18n:G}=d(),R=t(()=>g({showConsent:j,defaultToggleState:C,termsAndConditionsLink:S,privacyPolicyLink:_,termsAndConditionsVersion:O,fastlaneSessionId:w}),[j,C,S,_,O,w]),U=o(()=>{const e=!E;V(e);const n=new y({component:A,type:h.clicked,target:b.fastlaneSignupConsentToggle,configData:{isToggleOn:e}});P(n)},[E,P,A]);return s(()=>{R&&x({fastlaneData:k({consentShown:N,fastlaneSessionId:w,consentGiven:!!D&&E},O&&{consentVersion:O},M&&{telephoneNumber:M})})},[D,N,O,E,w,M,x,R]),s(()=>{D&&L(!0)},[D]),s(()=>{if(!R)return;const e=new y({component:A,type:h.rendered,configData:{isFastlaneSignupRendered:D}});P(e)},[D,R,P,A]),D&&R?e("div",{className:"adyen-checkout-card__fastlane","data-testid":"fastlane-signup-component"},e("div",{className:r("adyen-checkout-card__fastlane-consent-toggle",{"adyen-checkout-card__fastlane-consent-toggle--active":E})},e(i,{checked:E,onChange:U,ariaLabel:G.get("card.fastlane.consentToggle"),label:e("span",null,G.get("card.fastlane.consentToggle"))}),e(f,null)),E&&e(n,null,e(m,{initialValue:p(T),onChange:B}),e("div",{className:"adyen-checkout-card__fastlane-consent-text"},e(u,{message:G.get("card.fastlane.consentText"),urls:[S,_]})),e(l,{className:"adyen-checkout-card__fastlane-brand",src:F({imageFolder:"components/"})("paypal_fastlane_black"),alt:G.get("card.fastlane.a11y.logo")}))):null};export{C as default};
//# sourceMappingURL=FastlaneSignup.js.map
