{"version":3,"file":"Econtext.js","sources":["../../../../src/components/Econtext/Econtext.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport EcontextInput from './components/EcontextInput';\nimport EcontextVoucherResult from './components/EcontextVoucherResult';\nimport { TxVariants } from '../tx-variants';\nimport { EcontextConfiguration } from './types';\n\nexport class EcontextElement extends UIElement<EcontextConfiguration> {\n    public static readonly type = TxVariants.econtext;\n    public static readonly txVariants = [\n        TxVariants.econtext,\n        TxVariants.econtext_atm,\n        TxVariants.econtext_online,\n        TxVariants.econtext_seven_eleven,\n        TxVariants.econtext_stores\n    ];\n\n    protected static defaultProps = {\n        personalDetailsRequired: true\n    };\n\n    get isValid() {\n        if (!this.props.personalDetailsRequired) {\n            return true;\n        }\n        return !!this.state.isValid;\n    }\n\n    /**\n     * Formats the component data output\n     */\n    formatData() {\n        return {\n            ...this.state.data,\n            paymentMethod: {\n                type: this.type\n            }\n        };\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        return this.props.reference ? (\n            <EcontextVoucherResult\n                reference={this.props.reference}\n                totalAmount={this.props.totalAmount}\n                expiresAt={this.props.expiresAt}\n                paymentMethodType={this.props.paymentMethodType}\n                maskedTelephoneNumber={this.props.maskedTelephoneNumber}\n                instructionsUrl={this.props.instructionsUrl}\n                alternativeReference={this.props.alternativeReference}\n                collectionInstitutionNumber={this.props.collectionInstitutionNumber}\n                onActionHandled={this.onActionHandled}\n            />\n        ) : (\n            <EcontextInput\n                setComponentRef={this.setComponentRef}\n                data={this.props.data}\n                personalDetailsRequired={this.props.personalDetailsRequired}\n                showPayButton={this.props.showPayButton}\n                onChange={this.setState}\n                onSubmit={this.submit}\n                payButton={this.payButton}\n            />\n        );\n    }\n}\n\nexport default EcontextElement;\n"],"names":["EcontextElement","UIElement","isValid","this","props","personalDetailsRequired","state","formatData","_object_spread_props","_object_spread","data","paymentMethod","type","componentToRender","reference","h","EcontextVoucherResult","totalAmount","expiresAt","paymentMethodType","maskedTelephoneNumber","instructionsUrl","alternativeReference","collectionInstitutionNumber","onActionHandled","EcontextInput","setComponentRef","showPayButton","onChange","setState","onSubmit","submit","payButton","_define_property","TxVariants","econtext","txVariants","econtext_atm","econtext_online","econtext_seven_eleven","econtext_stores","defaultProps"],"mappings":"8xBAOO,MAAMA,UAAwBC,EAcjC,WAAIC,GACA,OAAKC,KAAKC,MAAMC,2BAGPF,KAAKG,MAAMJ,OACxB,CAKAK,UAAAA,GACI,OAAOC,oUAAAC,CAAA,CAAA,EACAN,KAAKG,MAAMI,MAAI,CAClBC,cAAe,CACXC,KAAMT,KAAKS,OAGvB,CAEmBC,iBAAAA,GACf,OAAOV,KAAKC,MAAMU,UACdC,EAACC,EAAAA,CACGF,UAAWX,KAAKC,MAAMU,UACtBG,YAAad,KAAKC,MAAMa,YACxBC,UAAWf,KAAKC,MAAMc,UACtBC,kBAAmBhB,KAAKC,MAAMe,kBAC9BC,sBAAuBjB,KAAKC,MAAMgB,sBAClCC,gBAAiBlB,KAAKC,MAAMiB,gBAC5BC,qBAAsBnB,KAAKC,MAAMkB,qBACjCC,4BAA6BpB,KAAKC,MAAMmB,4BACxCC,gBAAiBrB,KAAKqB,kBAG1BT,EAACU,EAAAA,CACGC,gBAAiBvB,KAAKuB,gBACtBhB,KAAMP,KAAKC,MAAMM,KACjBL,wBAAyBF,KAAKC,MAAMC,wBACpCsB,cAAexB,KAAKC,MAAMuB,cAC1BC,SAAUzB,KAAK0B,SACfC,SAAU3B,KAAK4B,OACfC,UAAW7B,KAAK6B,WAG5B,EAxDAC,EADSjC,EACcY,OAAOsB,EAAWC,UACzCF,EAFSjC,EAEcoC,aAAa,CAChCF,EAAWC,SACXD,EAAWG,aACXH,EAAWI,gBACXJ,EAAWK,sBACXL,EAAWM,kBAGfP,EAVSjC,EAUQyC,eAAe,CAC5BpC,yBAAyB"}