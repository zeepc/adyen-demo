{"version":3,"file":"EcontextInput.js","sources":["../../../../../../src/components/Econtext/components/EcontextInput/EcontextInput.tsx"],"sourcesContent":["import { Fragment, h } from 'preact';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport PersonalDetails from '../../../internal/PersonalDetails/PersonalDetails';\nimport { useCoreContext } from '../../../../core/Context/CoreProvider';\nimport { econtextValidationRules } from '../../validate';\nimport { PersonalDetailsSchema } from '../../../../types/global-types';\nimport FormInstruction from '../../../internal/FormInstruction';\nimport { ComponentMethodsRef } from '../../../internal/UIElement/types';\nimport { PayButtonProps } from '../../../internal/PayButton/PayButton';\nimport './EcontextInput.scss';\n\ninterface EcontextInputProps {\n    setComponentRef: (ref: ComponentMethodsRef) => void;\n    personalDetailsRequired?: boolean;\n    data?: PersonalDetailsSchema;\n    showPayButton: boolean;\n    payButton: (props: PayButtonProps) => h.JSX.Element;\n    onChange?(data: any): void;\n    onSubmit?(state: any, component: any): void;\n}\n\nexport default function EcontextInput({\n    data,\n    onChange,\n    showPayButton,\n    payButton,\n    setComponentRef,\n    personalDetailsRequired = true\n}: Readonly<EcontextInputProps>) {\n    const { i18n } = useCoreContext();\n\n    const [status, setStatus] = useState('ready');\n\n    const econtextRef = useRef<ComponentMethodsRef>({\n        setStatus\n    });\n\n    useEffect(() => {\n        setComponentRef(econtextRef.current);\n    }, [setComponentRef]);\n\n    const personalDetailsRef = useRef<ComponentMethodsRef | null>(null);\n    const setPersonalDetailsRef = (ref: ComponentMethodsRef) => {\n        personalDetailsRef.current = ref;\n        econtextRef.current = {\n            setStatus: econtextRef.current?.setStatus,\n            showValidation: ref.showValidation\n        };\n        setComponentRef(econtextRef.current);\n    };\n\n    return (\n        <div className=\"adyen-checkout__econtext-input__field\">\n            {personalDetailsRequired && (\n                <Fragment>\n                    <FormInstruction />\n                    <PersonalDetails\n                        data={data}\n                        requiredFields={['firstName', 'lastName', 'telephoneNumber', 'shopperEmail']}\n                        onChange={onChange}\n                        namePrefix=\"econtext\"\n                        setComponentRef={setPersonalDetailsRef}\n                        validationRules={econtextValidationRules}\n                    />\n                </Fragment>\n            )}\n            {showPayButton && payButton({ status, label: i18n.get('confirmPurchase') })}\n        </div>\n    );\n}\n"],"names":["EcontextInput","data","onChange","showPayButton","payButton","setComponentRef","personalDetailsRequired","i18n","useCoreContext","status","setStatus","useState","econtextRef","useRef","useEffect","current","personalDetailsRef","h","div","className","Fragment","FormInstruction","PersonalDetails","requiredFields","namePrefix","ref","showValidation","validationRules","econtextValidationRules","label","get"],"mappings":"6cAqBe,SAASA,GAAcC,KAClCA,EAAIC,SACJA,EAAQC,cACRA,EAAaC,UACbA,EAASC,gBACTA,EAAeC,wBACfA,GAA0B,IAE1B,MAAMC,KAAEA,GAASC,KAEVC,EAAQC,GAAaC,EAAS,SAE/BC,EAAcC,EAA4B,CAC5CH,cAGJI,EAAU,KACNT,EAAgBO,EAAYG,UAC7B,CAACV,IAEJ,MAAMW,EAAqBH,EAAmC,MAU9D,OACII,EAACC,MAAAA,CAAIC,UAAU,yCACVb,GACGW,EAACG,EAAAA,KACGH,EAACI,EAAAA,MACDJ,EAACK,EAAAA,CACGrB,KAAMA,EACNsB,eAAgB,CAAC,YAAa,WAAY,kBAAmB,gBAC7DrB,SAAUA,EACVsB,WAAW,WACXnB,gBAnBWoB,IAGZb,IAAAA,EAFfI,EAAmBD,QAAUU,EAC7Bb,EAAYG,QAAU,CAClBL,UAA8B,QAAnBE,EAAAA,EAAYG,eAAZH,IAAAA,SAAAA,EAAqBF,UAChCgB,eAAgBD,EAAIC,gBAExBrB,EAAgBO,EAAYG,UAcZY,gBAAiBC,KAI5BzB,GAAiBC,EAAU,CAAEK,SAAQoB,MAAOtB,EAAKuB,IAAI,qBAGlE"}