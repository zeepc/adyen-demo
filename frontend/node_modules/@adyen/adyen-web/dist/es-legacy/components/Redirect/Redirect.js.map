{"version":3,"file":"Redirect.js","sources":["../../../../src/components/Redirect/Redirect.tsx"],"sourcesContent":["import { h } from 'preact';\nimport UIElement from '../internal/UIElement/UIElement';\nimport RedirectShopper from './components/RedirectShopper';\nimport RedirectButton from '../internal/RedirectButton';\nimport { TxVariants } from '../tx-variants';\nimport { RedirectConfiguration } from './types';\nimport collectBrowserInfo from '../../utils/browserInfo';\nimport { AnalyticsErrorEvent, ErrorEventCode, ErrorEventType } from '../../core/Analytics/events/AnalyticsErrorEvent';\n\nclass RedirectElement extends UIElement<RedirectConfiguration> {\n    public static type = TxVariants.redirect;\n\n    public static defaultProps = {\n        type: RedirectElement.type\n    };\n\n    formatData() {\n        return {\n            paymentMethod: {\n                type: this.type\n            },\n            browserInfo: this.browserInfo\n        };\n    }\n\n    private handleRedirectError = () => {\n        const event = new AnalyticsErrorEvent({\n            component: this.props.paymentMethodType,\n            errorType: ErrorEventType.redirect,\n            code: ErrorEventCode.REDIRECT\n        });\n        super.submitAnalytics(event);\n    };\n\n    get isRedirecting() {\n        return !!this.props.url && !!this.props.method;\n    }\n\n    get isValid() {\n        return true;\n    }\n\n    get browserInfo() {\n        return collectBrowserInfo();\n    }\n\n    protected override componentToRender(): h.JSX.Element {\n        if (this.isRedirecting) {\n            return (\n                <RedirectShopper\n                    url={this.props.url}\n                    {...this.props}\n                    onActionHandled={this.onActionHandled}\n                    onRedirectError={this.handleRedirectError}\n                />\n            );\n        }\n\n        if (this.props.showPayButton) {\n            return (\n                <RedirectButton\n                    {...this.props}\n                    showPayButton={this.props.showPayButton}\n                    name={this.displayName}\n                    onSubmit={this.submit}\n                    payButton={this.payButton}\n                    ref={ref => {\n                        this.componentRef = ref;\n                    }}\n                />\n            );\n        }\n\n        return null;\n    }\n}\n\nexport default RedirectElement;\n"],"names":["RedirectElement","UIElement","formatData","paymentMethod","type","this","browserInfo","isRedirecting","props","url","method","isValid","collectBrowserInfo","componentToRender","h","RedirectShopper","onActionHandled","onRedirectError","handleRedirectError","showPayButton","RedirectButton","name","displayName","onSubmit","submit","payButton","ref","componentRef","super","args","_define_property","event","AnalyticsErrorEvent","component","paymentMethodType","errorType","ErrorEventType","redirect","code","ErrorEventCode","REDIRECT","submitAnalytics","TxVariants","defaultProps"],"mappings":"kwCASA,MAAMA,UAAwBC,EAO1BC,UAAAA,GACI,MAAO,CACHC,cAAe,CACXC,KAAMC,KAAKD,MAEfE,YAAaD,KAAKC,YAE1B,CAWA,iBAAIC,GACA,QAASF,KAAKG,MAAMC,OAASJ,KAAKG,MAAME,MAC5C,CAEA,WAAIC,GACA,OAAO,CACX,CAEA,eAAIL,GACA,OAAOM,GACX,CAEmBC,iBAAAA,GACf,OAAIR,KAAKE,cAEDO,EAACC,EAAAA,EAAAA,EAAAA,CACGN,IAAKJ,KAAKG,MAAMC,KACZJ,KAAKG,OAAK,CACdQ,gBAAiBX,KAAKW,gBACtBC,gBAAiBZ,KAAKa,uBAK9Bb,KAAKG,MAAMW,cAEPL,EAACM,EAAAA,EAAAA,EAAAA,GACOf,KAAKG,OAAK,CACdW,cAAed,KAAKG,MAAMW,cAC1BE,KAAMhB,KAAKiB,YACXC,SAAUlB,KAAKmB,OACfC,UAAWpB,KAAKoB,UAChBC,IAAKA,IACDrB,KAAKsB,aAAeD,MAM7B,IACX,mBAjEJE,SAAAC,GAgBIC,OAAQZ,sBAAsB,KAC1B,MAAMa,EAAQ,IAAIC,EAAoB,CAClCC,UAAW5B,KAAKG,MAAM0B,kBACtBC,UAAWC,EAAeC,SAC1BC,KAAMC,EAAeC,WAEzBZ,MAAMa,gBAAgBV,MArB1BD,EADE9B,EACYI,OAAOsC,EAAWL,UAEhCP,EAHE9B,EAGY2C,eAAe,CACzBvC,KAAMJ,EAAgBI"}