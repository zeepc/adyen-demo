import{useState as o,useEffect as e}from"../../../external/preact/hooks/dist/hooks.js";import s from"../../../core/Errors/useSRPanelContext.js";import{usePrevious as r}from"../../../utils/hookUtils.js";import{ERROR_ACTION_BLUR_SCENARIO as t,ERROR_ACTION_FOCUS_FIELD as l}from"../../../core/Errors/constants.js";import{getArrayDifferences as i}from"../../../utils/arrayUtils.js";import n from"../../internal/SecuredFields/lib/CSF/utils/userAgent.js";import{windowScrollTo as a}from"../../../utils/windowScrollTo.js";const u=({errors:u,isValidating:c,setIsValidating:d,sfp:m})=>{const[f,S]=o(null),p=r(f),{setSRMessagesFromObjects:y,setSRMessagesFromStrings:v,clearSRPanel:g,shouldMoveFocusSR:j}=s(),F=["encryptedCardNumber","encryptedExpiryDate","encryptedSecurityCode"];e(()=>{try{const o=null==y?void 0:y({}),e=null==o?void 0:o({errors:u,isValidating:c,layout:F}),s=null==e?void 0:e.currentErrorsSortedByLayout;switch(S(s),null==e?void 0:e.action){case l:if(j&&c){if(n.__IS_IOS){const o=null==m?void 0:m.getRootNode(),s=null==o?void 0:o.querySelector(`[data-id="${null==e?void 0:e.fieldToFocus}"]`);a(s)}null==m||m.setFocusOn(null==e?void 0:e.fieldToFocus)}setTimeout(()=>{d(!1)},300);break;case t:{const o=i(s,p,"field"),e=null==o?void 0:o[0];if(e){const o=!0?e.errorMessage:null;v(o)}else g();break}}}catch(o){}},[u])};export{u as useSRPanelForGiftcardErrors};
//# sourceMappingURL=useSRPanelForGiftcardErrors.js.map
