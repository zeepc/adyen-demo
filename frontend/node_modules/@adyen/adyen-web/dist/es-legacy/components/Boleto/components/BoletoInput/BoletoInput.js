import{createElement as e}from"../../../../external/preact/dist/preact.js";import{useRef as r,useState as t,useEffect as s}from"../../../../external/preact/hooks/dist/hooks.js";import i from"../../../internal/Address/Address.js";import{boletoValidationRules as o}from"./validate.js";import{boletoFormatters as a}from"./utils.js";import l from"../../../internal/SendCopyToEmail/SendCopyToEmail.js";import{useCoreContext as n}from"../../../../core/Context/CoreProvider.js";import d from"../../../../utils/useForm/useForm.js";import{BrazilPersonalDetail as u}from"../../../internal/SocialSecurityNumberBrazil/BrazilPersonalDetail.js";import c from"../../../internal/FormInstruction/FormInstruction.js";function p(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function m(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},s=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),s.forEach(function(r){p(e,r,t[r])})}return e}function b(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):function(e){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);r.push.apply(r,t)}return r}(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}function f(p){const{i18n:f}=n(),g=r(null),{handleChangeFor:y,triggerValidation:h,setSchema:j,setData:O,setValid:A,setErrors:R,data:w,valid:E,errors:P,isValid:q}=d({schema:["firstName","lastName","socialSecurityNumber","billingAddress","shopperEmail"],defaultData:p.data,rules:o,formatters:a}),[v,D]=t(!1);s(()=>{const e=[...p.personalDetailsRequired?["firstName","lastName","socialSecurityNumber"]:[],...p.billingAddressRequired?["billingAddress"]:[],...v?["shopperEmail"]:[]];j(e)},[v,p.personalDetailsRequired,p.billingAddressRequired]);const[S,C]=t("ready"),N=r({});var B;Object.keys(N.current).length||(null===(B=p.setComponentRef)||void 0===B||B.call(p,N.current));N.current.showValidation=()=>{h(),p.billingAddressRequired&&g.current.showValidation()},N.current.setStatus=C,s(()=>{const e=!p.billingAddressRequired||Boolean(E.billingAddress);p.onChange({data:w,valid:E,errors:P,isValid:q&&e})},[w,E,P]);const F=[...p.personalDetailsRequired||p.billingAddressRequired||p.showEmailAddress?[]:["standalone"]],V=p.personalDetailsRequired||p.billingAddressRequired;return e("div",{className:"adyen-checkout__boleto-input__field"},V&&e(c,null),p.personalDetailsRequired&&e(u,{i18n:f,data:w,handleChangeFor:y,errors:P,valid:E}),p.billingAddressRequired&&e(i,{allowedCountries:["BR"],label:"billingAddress",data:b(m({},p.data.billingAddress),{country:"BR"}),onChange:e=>{O("billingAddress",e.data),A("billingAddress",e.isValid),R("billingAddress",e.errors)},requiredFields:["country","street","houseNumberOrName","postalCode","city","stateOrProvince"],setComponentRef:e=>{g.current=e}}),p.showEmailAddress&&e(l,{value:w.shopperEmail,errors:P.shopperEmail,onToggle:()=>D(!v),onInput:y("shopperEmail","input"),onBlur:y("shopperEmail","blur")}),p.showPayButton&&p.payButton({status:S,label:f.get("boletobancario.btnLabel"),classNameModifiers:F}))}f.defaultProps={data:{},showEmailAddress:!0,personalDetailsRequired:!0,billingAddressRequired:!0};export{f as default};
//# sourceMappingURL=BoletoInput.js.map
